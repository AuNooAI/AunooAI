import{r as h,c as X,j as e,I as gn,C as Dt,a as le,b as $t,R as _e,u as Y,d as At,e as zt,P as U,f as oe,g as gs,h as Yt,i as Ft,k as K,l as yn,m as vn,n as bn,o as jn,F as Nn,D as wn,p as We,q as Ke,B as W,s as Ue,t as Ge,X as Cn,S as ys,v as st,w as Sn,x as kn,y as _n,z as vt,A as Zt,E as Ze,G as An,T as Pn,H as Tn}from"./index-DudskMYb.js";const Z="";async function Q(t,s={}){try{const n=await fetch(t,{...s,credentials:"include",headers:{"Content-Type":"application/json",...s.headers}});if(n.status===401||n.status===403)throw window.location.href="/login",new Error("Authentication required");if(!n.ok){const r=await n.json().catch(()=>({detail:"Unknown error"}));throw new Error(r.detail||`HTTP ${n.status}: ${n.statusText}`)}return await n.json()}catch(n){throw console.error("API Error:",n),n}}async function In(t){const s=new URLSearchParams;s.append("model",t.model),s.append("timeframe_days",String(t.timeframe_days||365)),s.append("analysis_depth",t.analysis_depth||"standard"),s.append("sample_size_mode",t.sample_size_mode||"auto"),s.append("consistency_mode",t.consistency_mode||"balanced"),s.append("enable_caching",String(t.enable_caching!==!1)),s.append("cache_duration_hours",String(t.cache_duration_hours||24)),t.custom_limit&&s.append("custom_limit",String(t.custom_limit)),t.profile_id&&s.append("profile_id",String(t.profile_id)),t.tab&&s.append("tab",t.tab);const n=`${Z}/api/trend-convergence/${encodeURIComponent(t.topic)}?${s}`;return Q(n)}async function En(){return(await Q(`${Z}/api/topics`)).map(s=>({name:s.name,display_name:s.display_name||s.name,article_count:s.article_count}))}async function Rn(){return(await Q(`${Z}/api/organizational-profiles`)).profiles||[]}async function On(){try{const t=await Q(`${Z}/api/available_models`),s={"gpt-3.5-turbo":16385,"gpt-4":8192,"gpt-4-turbo":128e3,"gpt-4o":128e3,"gpt-4o-mini":128e3,"gpt-4.1":1e6,"gpt-4.1-mini":1e6,"gpt-4.1-nano":1e6,"claude-3-opus":2e5,"claude-3-sonnet":2e5,"claude-3-haiku":2e5,"claude-3.5-sonnet":2e5,"claude-4":2e5,"gemini-pro":32768,"gemini-1.5-pro":2097152,default:128e3};return t.map(n=>({id:n.name,name:`${n.name} (${n.provider})`,context_limit:s[n.name]||s.default}))}catch(t){return console.error("Error fetching models:",t),[{id:"gpt-4o-mini",name:"GPT-4o Mini (openai)",context_limit:128e3},{id:"gpt-4.1-mini",name:"GPT-4.1 Mini (openai)",context_limit:1e6},{id:"claude-3.5-sonnet",name:"Claude 3.5 Sonnet (anthropic)",context_limit:2e5}]}}async function Mn(t){return Q(`${Z}/api/onboarding/validate-api-key`,{method:"POST",body:JSON.stringify(t)})}async function Ln(){return Q(`${Z}/api/onboarding/check-keys`)}async function vs(t){return Q(`${Z}/api/onboarding/suggest-topic-attributes`,{method:"POST",body:JSON.stringify(t)})}async function Dn(t){return Q(`${Z}/api/onboarding/save-topic`,{method:"POST",body:JSON.stringify(t)})}async function $n(){return Q(`${Z}/api/onboarding/complete`,{method:"POST"})}async function zn(t,s,n=100,r,i){const l=new URLSearchParams;l.append("topic",t),l.append("model",s),l.append("limit",String(n));const a=`${Z}/api/market-signals/analysis?${l}`;return Q(a)}async function Fn(t){const s=`${Z}/api/market-signals/${t}/raw`;return Q(s)}async function Vn(t){const s=`${Z}/api/trend-convergence/timeline/${t}/raw`;return Q(s)}async function Bn(t){const s=`${Z}/api/trend-convergence/strategic/${t}/raw`;return Q(s)}async function Hn(t){const s=`${Z}/api/trend-convergence/horizons/${t}/raw`;return Q(s)}const Qt={topic:"",timeframe_days:365,model:"gpt-4o",analysis_depth:"standard",sample_size_mode:"auto",consistency_mode:"balanced",enable_caching:!0,cache_duration_hours:24},Ae={CONFIG:"trendConvergence_config",DATA:"trendConvergence_data",DATA_PREFIX:"trendConvergence_data_",TOPIC:"trendConvergence_topic"};function Wn(){const t=()=>{try{const g=localStorage.getItem(Ae.CONFIG);if(g)return{...Qt,...JSON.parse(g)}}catch(g){console.error("Error loading stored config:",g)}return Qt},s=g=>{try{if(g){const _=`${Ae.DATA_PREFIX}${g}`,k=localStorage.getItem(_);if(k)return JSON.parse(k)}const y=localStorage.getItem(Ae.DATA);if(y)return JSON.parse(y)}catch(y){console.error("Error loading stored data:",y)}return null},[n,r]=h.useState(null),[i,l]=h.useState([]),[a,o]=h.useState([]),[c,x]=h.useState([]),[d,f]=h.useState(t),[N,u]=h.useState(!1),[v,p]=h.useState(null);h.useEffect(()=>{try{localStorage.setItem(Ae.CONFIG,JSON.stringify(d)),d.topic&&localStorage.setItem(Ae.TOPIC,d.topic)}catch(g){console.error("Error saving config:",g)}},[d]),h.useEffect(()=>{b()},[]),h.useEffect(()=>{if(d.tab){const g=s(d.tab);g&&r(g)}},[d.tab]);const b=async()=>{try{const[g,y,_]=await Promise.all([En(),Rn(),On()]);l(g),o(y),x(_),g.length>0&&!d.topic&&f(k=>({...k,topic:g[0].name})),_.length>0&&!d.model&&f(k=>({...k,model:_[0].id}))}catch(g){console.error("Error loading initial data:",g),p(g instanceof Error?g.message:"Failed to load initial data")}},w=h.useCallback(async(g=!1)=>{if(!d.topic){p("Please select a topic");return}if(!d.model&&d.tab!=="signals"){p("Please select a model");return}u(!0),p(null);try{let y;if(d.tab==="signals")y=await zn(d.topic,d.model,d.custom_limit||100);else{const _=g?{...d,enable_caching:!1}:d;y=await In(_)}r(y);try{if(d.tab){const _=`${Ae.DATA_PREFIX}${d.tab}`;localStorage.setItem(_,JSON.stringify(y))}localStorage.setItem(Ae.DATA,JSON.stringify(y))}catch(_){console.error("Error saving analysis data:",_)}}catch(y){console.error("Error generating analysis:",y),p(y instanceof Error?y.message:"Failed to generate analysis")}finally{u(!1)}},[d]),j=h.useCallback(g=>{f(y=>({...y,...g}))},[]),C=h.useCallback(()=>{p(null)},[]);return{data:n,topics:i,profiles:a,models:c,config:d,loading:N,error:v,generateAnalysis:w,updateConfig:j,clearError:C}}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Un=X("check",Kn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Xn=X("chevron-left",Gn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Yn=X("chevron-right",qn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],bs=X("chevron-up",Zn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],bt=X("circle-alert",Qn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],jt=X("circle-check-big",Jn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Nt=X("circle-x",er);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],Qe=X("code",tr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],wt=X("eye-off",sr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ct=X("eye",nr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ir=X("image",rr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ve=X("loader-circle",ar);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],or=X("pen",lr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],dr=X("refresh-cw",cr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Je=X("target",mr),xr=[{id:"strategic-recommendations",label:"Strategic Recommendations"},{id:"market-signals",label:"Market Signals & Strategic Risks"},{id:"consensus",label:"Consensus Analysis"},{id:"impact-timeline",label:"Impact Timeline"},{id:"future-horizons",label:"Future Horizons"}];function ur({activeTab:t,onTabChange:s}){return e.jsx("div",{className:"flex gap-0 border-b border-gray-200",children:xr.map(n=>e.jsxs("button",{onClick:()=>s(n.id),className:`
            px-6 py-3 text-sm font-medium transition-all relative
            ${t===n.id?"text-gray-900":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}
          `,children:[n.label,t===n.id&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-pink-500"})]},n.id))})}const hr={green:"bg-green-500",yellow:"bg-amber-500",red:"bg-rose-500"};function St({startYear:t,endYear:s,color:n}){const a=(t-2025)/15*100,o=(s-t)/15*100;return e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs text-gray-600",children:2025}),e.jsx("span",{className:"text-xs text-gray-600",children:2040})]}),e.jsx("div",{className:"relative h-2 bg-gray-200 rounded-full",children:e.jsx("div",{className:`absolute h-full ${hr[n]} rounded-full transition-all`,style:{left:`${a}%`,width:`${o}%`}})})]})}const Jt={purple:{bg:"bg-purple-50",border:"border-purple-200",bar:"bg-purple-500",badge:"bg-pink-100 text-pink-700"},orange:{bg:"bg-orange-50",border:"border-orange-200",bar:"bg-orange-500",badge:"bg-pink-100 text-pink-700"},blue:{bg:"bg-blue-50",border:"border-blue-200",bar:"bg-blue-500",badge:"bg-pink-100 text-pink-700"},green:{bg:"bg-green-50",border:"border-green-200",bar:"bg-green-500",badge:"bg-pink-100 text-pink-700"},pink:{bg:"bg-pink-50",border:"border-pink-200",bar:"bg-pink-500",badge:"bg-pink-100 text-pink-700"},indigo:{bg:"bg-indigo-50",border:"border-indigo-200",bar:"bg-indigo-500",badge:"bg-pink-100 text-pink-700"}};function pr({name:t,description:s,consensusPercentage:n,timelineStartYear:r,timelineEndYear:i,optimisticOutlier:l,pessimisticOutlier:a,strategicImplication:o,keyArticles:c=[],color:x,consensusType:d,sentimentDistribution:f,timelineConsensus:N,articlesAnalyzed:u,actionItems:v,timeframeAnalysis:p}){const b=Jt[x]||Jt.purple,[w,j]=h.useState(!1),C=i-r;let g=20,y=40;N&&(N.includes("Immediate")?(g=2,y=18):N.includes("Short-term")?(g=22,y=26):N.includes("Mid-term")?(g=50,y=24):N.includes("Long-term")&&(g=76,y=22));const _=()=>N?N.toUpperCase():r<=2025&&i<=2027?"SHORT-TERM (2025-2027)":r<=2027&&i<=2030?"MID-TERM (2027-2030)":r>=2030?"LONG-TERM (2030-2035+)":r===2025&&i===2025?"IMMEDIATE (2025)":`${r}-${i}`,k=(l.year-r)/C*100,T=(a.year-r)/C*100,[L,D]=h.useState(null);return e.jsxs("div",{className:`${b.bg} ${b.border} border rounded-xl p-6 mb-4 cursor-pointer hover:shadow-md transition-shadow`,onClick:()=>j(!w),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-950 mb-1",children:t}),e.jsx("p",{className:"text-sm text-gray-700",children:s})]}),e.jsxs("span",{className:`${b.badge} px-3 py-1 rounded-full text-xs font-medium ml-4 shrink-0`,children:[n,"% Consensus"]})]}),e.jsxs("div",{className:"mb-6 relative",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-700 mb-2",children:[e.jsx("span",{children:r}),e.jsx("span",{children:Math.floor((r+i)/2)}),e.jsx("span",{children:i}),e.jsxs("span",{children:[i,"+"]})]}),e.jsxs("div",{className:"relative h-8",children:[e.jsx("div",{className:"absolute top-3 left-0 right-0 h-2 bg-gray-200 rounded-full"}),e.jsx("div",{className:`absolute top-3 h-2 ${b.bar} rounded-full`,style:{left:`${g}%`,width:`${y}%`},title:`Consensus Timeline: ${_()}
${n}% of sources agree on this timeframe`,children:e.jsx("div",{className:"absolute -top-2 left-0 right-0 text-center",children:e.jsxs("span",{className:"text-xs font-medium text-gray-800 bg-white px-2 py-0.5 rounded shadow-sm",children:[n,"% â€¢ ",_()]})})}),e.jsx("div",{className:"absolute top-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white shadow-md cursor-help hover:scale-125 transition-transform",style:{left:`${k}%`,transform:"translateX(-50%)"},title:`Optimistic Outlier (${l.year})
${l.description}
${l.source_percentage}% of sources`,onClick:A=>A.stopPropagation()}),e.jsx("div",{className:"absolute top-1 w-4 h-4 bg-red-500 rounded-full border-2 border-white shadow-md cursor-help hover:scale-125 transition-transform",style:{left:`${T}%`,transform:"translateX(-50%)"},title:`Pessimistic Outlier (${a.year})
${a.description}
${a.source_percentage}% of sources`,onClick:A=>A.stopPropagation()}),e.jsx("div",{className:"absolute top-1 right-0 w-4 h-4 bg-green-500 rounded-full border-2 border-white shadow-md transform translate-x-1/2"})]})]}),w&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(d||f||u)&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[d&&e.jsxs("div",{children:[e.jsx("h6",{className:"text-xs font-bold text-gray-950 mb-2 uppercase",children:"Consensus Type"}),e.jsx("div",{className:"text-sm font-semibold text-gray-800 mb-1",children:d}),e.jsxs("div",{className:"text-xs text-gray-600",children:[n,"% confidence level",u&&` â€¢ Based on ${u} articles`]})]}),f&&e.jsxs("div",{children:[e.jsx("h6",{className:"text-xs font-bold text-gray-950 mb-2 uppercase",children:"Sentiment Distribution"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-700",children:"Positive:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[f.positive,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-700",children:"Neutral:"}),e.jsxs("span",{className:"font-semibold text-gray-600",children:[f.neutral,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-700",children:"Critical:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:[f.critical,"%"]})]})]}),e.jsxs("div",{className:"mt-2 h-2 flex rounded-full overflow-hidden",children:[e.jsx("div",{className:"bg-green-500",style:{width:`${f.positive}%`}}),e.jsx("div",{className:"bg-gray-400",style:{width:`${f.neutral}%`}}),e.jsx("div",{className:"bg-red-500",style:{width:`${f.critical}%`}})]})]})]}),N&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("h6",{className:"text-xs font-bold text-gray-950 mb-1 uppercase",children:"Timeline Consensus"}),e.jsx("div",{className:"text-sm text-gray-800",children:N}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Majority of sources expect impacts within this timeframe"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mt-1 shrink-0"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs font-semibold text-gray-950 mb-0.5",children:["Optimistic Outlier (",l.year,")"]}),e.jsx("div",{className:"text-xs text-gray-700 mb-0.5",children:l.description}),e.jsxs("div",{className:"text-xs text-gray-600",children:[l.source_percentage,"% of sources"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mt-1 shrink-0"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs font-semibold text-gray-950 mb-0.5",children:["Pessimistic Outlier (",a.year,")"]}),e.jsx("div",{className:"text-xs text-gray-700 mb-0.5",children:a.description}),e.jsxs("div",{className:"text-xs text-gray-600",children:[a.source_percentage,"% of sources"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-white border-2 border-gray-300 flex items-center justify-center shrink-0",children:e.jsx(gn,{className:"w-3 h-3 text-gray-700"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-gray-950 mb-0.5",children:"Strategic Implication"}),e.jsx("div",{className:"text-xs text-gray-700",children:o})]})]})]}),c.length>0&&e.jsxs("div",{children:[e.jsx("h6",{className:"text-sm font-bold text-gray-950 mb-3",children:"Key Supporting Articles"}),e.jsx("div",{className:"space-y-2",children:c.map((A,m)=>{const S=A.sentiment==="positive"?"bg-green-100 text-green-700":A.sentiment==="critical"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-800";return e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-gray-200",onClick:P=>P.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("a",{href:A.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-semibold text-gray-950 hover:text-blue-600 flex-1",children:A.title}),A.sentiment&&e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium shrink-0 ${S}`,children:A.sentiment})]}),e.jsx("p",{className:"text-xs text-gray-700 mb-1",children:A.summary}),e.jsxs("a",{href:A.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"External Link"]})]},m)})})]}),v&&v.length>0&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h6",{className:"text-sm font-bold text-gray-950 mb-3",children:"ğŸ¯ Action Items"}),e.jsx("div",{className:"space-y-3",children:v.map((A,m)=>{const S=A.priority==="High"?"bg-red-100 text-red-700 border-red-200":A.priority==="Medium"?"bg-yellow-100 text-yellow-700 border-yellow-200":"bg-green-100 text-green-700 border-green-200";return e.jsxs("div",{className:`p-3 ${S} rounded-lg border`,children:[e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${S}`,children:A.priority}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:A.timeframe})]}),e.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-2",children:A.action}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-gray-700",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Owner:"})," ",A.owner]}),A.success_metrics&&A.success_metrics.length>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Metrics:"})," ",A.success_metrics.join(", ")]})]})]},m)})})]}),p&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h6",{className:"text-sm font-bold text-gray-950 mb-3",children:"ğŸ“… Timeframe Analysis"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("div",{className:"text-xs font-bold text-blue-900 mb-1",children:"âš¡ IMMEDIATE (0-6 months)"}),e.jsx("div",{className:"text-sm text-gray-800",children:p.immediate})]}),e.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsx("div",{className:"text-xs font-bold text-purple-900 mb-1",children:"ğŸ“ˆ SHORT-TERM (6-18 months)"}),e.jsx("div",{className:"text-sm text-gray-800",children:p.short_term})]}),e.jsxs("div",{className:"p-3 bg-indigo-50 border border-indigo-200 rounded-lg",children:[e.jsx("div",{className:"text-xs font-bold text-indigo-900 mb-1",children:"ğŸ”® MID-TERM (18-36 months)"}),e.jsx("div",{className:"text-sm text-gray-800",children:p.mid_term})]}),p.key_milestones&&p.key_milestones.length>0&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"text-xs font-bold text-gray-900 mb-2",children:"ğŸ¯ Key Milestones"}),e.jsx("div",{className:"space-y-2",children:p.key_milestones.map((A,m)=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-12 text-xs font-bold text-gray-700 shrink-0",children:A.year}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.milestone}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:A.significance})]})]},m))})]})]})]})]}),e.jsx("div",{className:"flex justify-center mt-4",children:w?e.jsx(bs,{className:"w-5 h-5 text-gray-500"}):e.jsx(Dt,{className:"w-5 h-5 text-gray-500"})})]})}const fr=({timelineConsensus:t,optimisticOutliers:s,pessimisticOutliers:n,color:r})=>{const[i,l]=h.useState(null),[a,o]=h.useState(null),c=2025,x=2050,d=x-c,f=C=>(C-c)/d*100,N=f(t.consensus_window.start_year),v=f(t.consensus_window.end_year)-N,p=n[0],b=s[0],w=(C,g)=>{l(C),o({x:g.clientX,y:g.clientY})},j=()=>{l(null),o(null)};return e.jsxs("div",{className:"timeline-section",children:[e.jsxs("div",{className:"consensus-button-wrapper",children:[e.jsx("div",{className:"consensus-button",style:{left:`${N}%`,width:`${v}%`,backgroundColor:r},children:"Consensus"}),e.jsxs("div",{className:"timeline-thin-line",children:[p&&e.jsx("div",{className:"thumb thumb-red",style:{left:`${f(p.year)}%`},onMouseEnter:C=>w(p,C),onMouseLeave:j}),b&&e.jsx("div",{className:"thumb thumb-green",style:{left:`${f(b.year)}%`},onMouseEnter:C=>w(b,C),onMouseLeave:j})]})]}),e.jsxs("div",{className:"timeline-labels",children:[e.jsx("div",{className:"year-label",children:c}),e.jsx("div",{className:"year-label",children:"2030"}),e.jsx("div",{className:"year-label",children:"2040"}),e.jsxs("div",{className:"year-label",children:[x,"+"]})]}),i&&a&&e.jsxs("div",{className:"outlier-tooltip-fixed",style:{left:`${a.x}px`,top:`${a.y-60}px`},children:[e.jsxs("div",{style:{fontWeight:600,marginBottom:"4px"},children:[i.scenario," (",i.year,")"]}),e.jsxs("div",{style:{fontSize:"11px",opacity:.9},children:[i.source_percentage,"% of sources"]})]})]})},gr=({distribution:t})=>e.jsxs("div",{className:"sentiment-chart-thin",children:[e.jsx("div",{style:{fontSize:"11px",fontWeight:600,marginBottom:"6px",color:"#9ca3af",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Sentiment Distribution"}),e.jsxs("div",{className:"sentiment-line-container",children:[t.positive>0&&e.jsx("div",{className:"sentiment-segment sentiment-positive",style:{width:`${t.positive}%`},title:`Positive: ${t.positive}%`}),t.neutral>0&&e.jsx("div",{className:"sentiment-segment sentiment-neutral",style:{width:`${t.neutral}%`},title:`Neutral: ${t.neutral}%`}),t.critical>0&&e.jsx("div",{className:"sentiment-segment sentiment-critical",style:{width:`${t.critical}%`},title:`Critical: ${t.critical}%`})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"6px",fontSize:"11px",color:"#9ca3af"},children:[e.jsxs("span",{style:{color:"#10b981"},children:["âœ“ ",t.positive,"%"]}),e.jsxs("span",{style:{color:"#6b7280"},children:["âŠ™ ",t.neutral,"%"]}),e.jsxs("span",{style:{color:"#ef4444"},children:["âœ— ",t.critical,"%"]})]})]}),yr=({windows:t})=>{const s=r=>`decision-window urgency-${r.toLowerCase()}`,n=r=>`urgency-badge urgency-${r.toLowerCase()}`;return e.jsxs("div",{className:"decision-windows",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{children:"ğŸ¯"}),e.jsx("span",{children:"Key Decision Windows"})]}),t.map((r,i)=>e.jsxs("div",{className:s(r.urgency),children:[e.jsxs("div",{className:"decision-header",children:[e.jsx("div",{className:"decision-action",children:r.action}),e.jsx("div",{className:n(r.urgency),children:r.urgency})]}),e.jsx("div",{className:"decision-rationale",children:r.rationale}),e.jsxs("div",{className:"decision-meta",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Timeframe:"})," ",r.window]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Owner:"})," ",r.owner]})]}),r.dependencies&&r.dependencies.length>0&&e.jsxs("div",{style:{marginTop:"8px",fontSize:"12px",color:"#6b7280"},children:[e.jsx("strong",{children:"Dependencies:"})," ",r.dependencies.join(", ")]}),r.success_metrics&&r.success_metrics.length>0&&e.jsxs("div",{style:{marginTop:"4px",fontSize:"12px",color:"#6b7280"},children:[e.jsx("strong",{children:"Success Metrics:"})," ",r.success_metrics.join(", ")]})]},i))]})},es=["#a855f7","#f97316","#3b82f6","#10b981","#ec4899","#6366f1"],vr=({category:t,color:s,index:n=0})=>{const[r,i]=h.useState(!1),l=t["1_consensus_type"],a=t["2_timeline_consensus"],o=t["3_confidence_level"],c=t["4_optimistic_outliers"]||[],x=t["5_pessimistic_outliers"]||[],d=t["6_key_articles"]||[],f=t["7_strategic_implications"],N=t["8_key_decision_windows"]||[],u=t["9_timeframe_analysis"],v=s||es[n%es.length],p=o.majority_agreement,b=(()=>{const{positive:g,neutral:y,critical:_}=l.distribution,k=g+y+_;return k>.9&&k<=1.1?{positive:g*100,neutral:y*100,critical:_*100}:k<10&&k>0?{positive:g/k*100,neutral:y/k*100,critical:_/k*100}:{positive:g,neutral:y,critical:_}})(),w=()=>{i(!r)},j=(g,y=80)=>{if(!g)return"";const _=g.split(/[.!?]/)[0];return _&&_.length<=y?_:g.length>y?g.substring(0,y)+"...":g},C=g=>`metric-badge ${{Strong:"badge-strong",Moderate:"badge-moderate",Emerging:"badge-emerging"}[g]||"badge-moderate"}`;return e.jsxs("div",{className:`consensus-card-simple ${r?"expanded":""}`,onClick:w,children:[e.jsxs("div",{className:"consensus-card-header",children:[e.jsxs("div",{className:"consensus-card-title-section",children:[e.jsx("div",{className:"consensus-card-icon",style:{backgroundColor:v},children:e.jsx("svg",{className:"brain-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M15.375 7.75008C15.3741 7.0981 15.1849 6.46025 14.8301 5.91328C14.4753 5.3663 13.97 4.9335 13.375 4.66696V4.50008C13.3743 3.86569 13.1639 3.24931 12.7764 2.74699C12.389 2.24467 11.8462 1.8846 11.2328 1.7229C10.6193 1.56119 9.96965 1.60692 9.38491 1.85297C8.80017 2.09902 8.31323 2.53156 7.99996 3.08321C7.68668 2.53156 7.19974 2.09902 6.615 1.85297C6.03026 1.60692 5.38057 1.56119 4.76713 1.7229C4.15368 1.8846 3.61095 2.24467 3.22349 2.74699C2.83602 3.24931 2.62559 3.86569 2.62496 4.50008V4.66696C2.02949 4.93261 1.52372 5.36507 1.1688 5.91205C0.813878 6.45903 0.625 7.0971 0.625 7.74914C0.625 8.40118 0.813878 9.03926 1.1688 9.58624C1.52372 10.1332 2.02949 10.5657 2.62496 10.8313V11.0001C2.62559 11.6345 2.83602 12.2508 3.22349 12.7532C3.61095 13.2555 4.15368 13.6156 4.76713 13.7773C5.38057 13.939 6.03026 13.8932 6.615 13.6472C7.19974 13.4011 7.68668 12.9686 7.99996 12.417C8.31323 12.9686 8.80017 13.4011 9.38491 13.6472C9.96965 13.8932 10.6193 13.939 11.2328 13.7773C11.8462 13.6156 12.389 13.2555 12.7764 12.7532C13.1639 12.2508 13.3743 11.6345 13.375 11.0001V10.8313C13.97 10.5653 14.4753 10.1329 14.8302 9.58619C15.185 9.03949 15.3742 8.40184 15.375 7.75008ZM5.49996 13.1251C4.94766 13.1253 4.41696 12.9106 4.0203 12.5263C3.62364 12.142 3.39217 11.6184 3.37496 11.0663C3.581 11.1054 3.79024 11.1251 3.99996 11.1251H4.49996C4.59941 11.1251 4.69479 11.0856 4.76512 11.0152C4.83545 10.9449 4.87496 10.8495 4.87496 10.7501C4.87496 10.6506 4.83545 10.5552 4.76512 10.4849C4.69479 10.4146 4.59941 10.3751 4.49996 10.3751H3.99996C3.38035 10.3756 2.78054 10.1569 2.30666 9.75772C1.83278 9.35854 1.51538 8.80459 1.41062 8.19391C1.30586 7.58323 1.42049 6.95517 1.73424 6.42088C2.04798 5.88658 2.54061 5.48049 3.12496 5.27446C3.1981 5.2486 3.26142 5.20069 3.3062 5.13733C3.35097 5.07397 3.375 4.99829 3.37496 4.92071V4.50008C3.37496 3.9365 3.59884 3.39599 3.99735 2.99748C4.39587 2.59896 4.93637 2.37508 5.49996 2.37508C6.06354 2.37508 6.60404 2.59896 7.00256 2.99748C7.40107 3.39599 7.62496 3.9365 7.62496 4.50008V9.06571C7.35599 8.76933 7.02797 8.53253 6.66199 8.37053C6.29601 8.20854 5.90018 8.12493 5.49996 8.12508C5.4005 8.12508 5.30512 8.16459 5.23479 8.23492C5.16446 8.30524 5.12496 8.40062 5.12496 8.50008C5.12496 8.59954 5.16446 8.69492 5.23479 8.76525C5.30512 8.83557 5.4005 8.87508 5.49996 8.87508C6.06354 8.87508 6.60404 9.09896 7.00256 9.49748C7.40107 9.89599 7.62496 10.4365 7.62496 11.0001C7.62496 11.5637 7.40107 12.1042 7.00256 12.5027C6.60404 12.9012 6.06354 13.1251 5.49996 13.1251ZM12 10.3751H11.5C11.4005 10.3751 11.3051 10.4146 11.2348 10.4849C11.1645 10.5552 11.125 10.6506 11.125 10.7501C11.125 10.8495 11.1645 10.9449 11.2348 11.0152C11.3051 11.0856 11.4005 11.1251 11.5 11.1251H12C12.2097 11.1251 12.4189 11.1054 12.625 11.0663C12.6119 11.4835 12.4763 11.8877 12.2351 12.2283C11.9938 12.569 11.6576 12.831 11.2683 12.9817C10.879 13.1324 10.454 13.1652 10.0463 13.0759C9.63851 12.9865 9.2661 12.7791 8.9755 12.4794C8.68491 12.1798 8.489 11.8012 8.41223 11.3909C8.33547 10.9806 8.38124 10.5568 8.54384 10.1723C8.70644 9.78786 8.97867 9.45982 9.32654 9.22912C9.67442 8.99842 10.0825 8.87528 10.5 8.87508C10.5994 8.87508 10.6948 8.83557 10.7651 8.76525C10.8354 8.69492 10.875 8.59954 10.875 8.50008C10.875 8.40062 10.8354 8.30524 10.7651 8.23492C10.6948 8.16459 10.5994 8.12508 10.5 8.12508C10.0997 8.12493 9.7039 8.20854 9.33792 8.37053C8.97195 8.53253 8.64393 8.76933 8.37496 9.06571V4.50008C8.37496 3.9365 8.59884 3.39599 8.99735 2.99748C9.39587 2.59896 9.93637 2.37508 10.5 2.37508C11.0635 2.37508 11.604 2.59896 12.0026 2.99748C12.4011 3.39599 12.625 3.9365 12.625 4.50008V4.92071C12.6249 4.99829 12.6489 5.07397 12.6937 5.13733C12.7385 5.20069 12.8018 5.2486 12.875 5.27446C13.4593 5.48049 13.9519 5.88658 14.2657 6.42088C14.5794 6.95517 14.6941 7.58323 14.5893 8.19391C14.4845 8.80459 14.1671 9.35854 13.6932 9.75772C13.2194 10.1569 12.6196 10.3756 12 10.3751ZM12.875 7.00008C12.875 7.09954 12.8354 7.19492 12.7651 7.26525C12.6948 7.33557 12.5994 7.37508 12.5 7.37508H12.25C11.6864 7.37508 11.1459 7.1512 10.7474 6.75268C10.3488 6.35417 10.125 5.81367 10.125 5.25008V5.00008C10.125 4.90063 10.1645 4.80524 10.2348 4.73492C10.3051 4.66459 10.4005 4.62508 10.5 4.62508C10.5994 4.62508 10.6948 4.66459 10.7651 4.73492C10.8354 4.80524 10.875 4.90063 10.875 5.00008V5.25008C10.875 5.61475 11.0198 5.96449 11.2777 6.22235C11.5355 6.48022 11.8853 6.62508 12.25 6.62508H12.5C12.5994 6.62508 12.6948 6.66459 12.7651 6.73492C12.8354 6.80524 12.875 6.90062 12.875 7.00008ZM3.74996 7.37508H3.49996C3.4005 7.37508 3.30512 7.33557 3.23479 7.26525C3.16447 7.19492 3.12496 7.09954 3.12496 7.00008C3.12496 6.90062 3.16447 6.80524 3.23479 6.73492C3.30512 6.66459 3.4005 6.62508 3.49996 6.62508H3.74996C4.11463 6.62508 4.46437 6.48022 4.72223 6.22235C4.98009 5.96449 5.12496 5.61475 5.12496 5.25008V5.00008C5.12496 4.90063 5.16446 4.80524 5.23479 4.73492C5.30512 4.66459 5.4005 4.62508 5.49996 4.62508C5.59941 4.62508 5.69479 4.66459 5.76512 4.73492C5.83545 4.80524 5.87496 4.90063 5.87496 5.00008V5.25008C5.87496 5.81367 5.65107 6.35417 5.25256 6.75268C4.85404 7.1512 4.31354 7.37508 3.74996 7.37508Z",fill:"white"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"consensus-card-title",children:t.category_name}),e.jsx("p",{className:"consensus-card-subtitle",children:r?t.category_description:j(t.category_description,100)})]})]}),e.jsxs("div",{className:"consensus-card-actions",children:[e.jsxs("div",{className:"consensus-percentage-badge",style:{backgroundColor:`${v}20`,color:v,border:`1px solid ${v}40`},children:[p,"% Consensus"]}),e.jsx("div",{className:`expand-arrow ${r?"rotated":""}`,children:"â–¼"})]})]}),e.jsx("div",{className:"consensus-card-timeline",children:e.jsx(fr,{timelineConsensus:a,optimisticOutliers:c,pessimisticOutliers:x,color:v})}),r&&e.jsxs("div",{className:"consensus-card-expanded-content",onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{className:"consensus-metrics",children:[e.jsxs("div",{className:"metric-item",children:[e.jsx("div",{className:"metric-label",children:"Consensus Type"}),e.jsx("div",{className:"metric-value",children:l.summary})]}),e.jsxs("div",{className:"metric-item",children:[e.jsx("div",{className:"metric-label",children:"Agreement"}),e.jsxs("div",{className:"metric-value",children:[o.majority_agreement,"%"]})]}),e.jsxs("div",{className:"metric-item",children:[e.jsx("div",{className:"metric-label",children:"Strength"}),e.jsx("div",{className:C(o.consensus_strength),children:o.consensus_strength})]}),e.jsxs("div",{className:"metric-item",children:[e.jsx("div",{className:"metric-label",children:"Evidence Quality"}),e.jsx("div",{className:C(o.evidence_quality),children:o.evidence_quality})]}),e.jsxs("div",{className:"metric-item",children:[e.jsx("div",{className:"metric-label",children:"Articles"}),e.jsx("div",{className:"metric-value",children:t.articles_analyzed})]})]}),e.jsx(gr,{distribution:b}),e.jsxs("div",{className:"strategic-implications-box",children:[e.jsx("div",{className:"section-title-small",children:"ğŸ’¡ Strategic Implications"}),e.jsx("div",{className:"section-content-small",children:f})]}),N.length>0&&e.jsx(yr,{windows:N}),u&&e.jsxs("div",{className:"content-section",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{children:"ğŸ“…"}),e.jsx("span",{children:"Timeframe Analysis"})]}),e.jsxs("div",{className:"timeframe-grid",children:[e.jsxs("div",{className:"timeframe-box",children:[e.jsx("div",{className:"timeframe-label",children:"Immediate (0-6 months)"}),e.jsx("div",{className:"timeframe-content",children:u.immediate})]}),e.jsxs("div",{className:"timeframe-box",children:[e.jsx("div",{className:"timeframe-label",children:"Short-term (6-18 months)"}),e.jsx("div",{className:"timeframe-content",children:u.short_term})]}),e.jsxs("div",{className:"timeframe-box",children:[e.jsx("div",{className:"timeframe-label",children:"Mid-term (18-36 months)"}),e.jsx("div",{className:"timeframe-content",children:u.mid_term})]})]}),u.key_milestones&&u.key_milestones.length>0&&e.jsxs("div",{style:{marginTop:"16px"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:600,marginBottom:"12px",color:"#6b7280"},children:"Key Milestones"}),e.jsx("div",{className:"milestones-list",children:u.key_milestones.map((g,y)=>e.jsxs("div",{className:"milestone-item",children:[e.jsx("div",{className:"milestone-year",children:g.year}),e.jsxs("div",{className:"milestone-info",children:[e.jsx("div",{className:"milestone-title",children:g.milestone}),e.jsx("div",{className:"milestone-significance",children:g.significance})]})]},y))})]})]}),(c.length>0||x.length>0)&&e.jsxs("div",{className:"content-section",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{children:"ğŸ”"}),e.jsx("span",{children:"Outlier Perspectives"})]}),e.jsxs("div",{className:"outliers-grid",children:[c.length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:600,marginBottom:"12px",color:"#10b981"},children:"Optimistic Outliers"}),c.map((g,y)=>e.jsxs("div",{className:"outlier-card optimistic",style:{marginBottom:"12px"},children:[e.jsxs("div",{className:"outlier-scenario",children:[g.scenario," (",g.year,")"]}),e.jsx("div",{className:"outlier-details",children:g.details}),e.jsxs("div",{className:"outlier-reference",children:[g.source_percentage,"% of sources â€¢ ",g.reference]})]},y))]}),x.length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:600,marginBottom:"12px",color:"#ef4444"},children:"Pessimistic Outliers"}),x.map((g,y)=>e.jsxs("div",{className:"outlier-card pessimistic",style:{marginBottom:"12px"},children:[e.jsxs("div",{className:"outlier-scenario",children:[g.scenario," (",g.year,")"]}),e.jsx("div",{className:"outlier-details",children:g.details}),e.jsxs("div",{className:"outlier-reference",children:[g.source_percentage,"% of sources â€¢ ",g.reference]})]},y))]})]})]}),d.length>0&&e.jsxs("div",{className:"content-section",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{children:"ğŸ“°"}),e.jsx("span",{children:"Key Supporting Articles"})]}),e.jsx("div",{className:"articles-list",children:d.slice(0,5).map((g,y)=>e.jsxs("div",{className:"article-item",children:[e.jsxs("div",{className:"article-title",children:[e.jsx("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",children:g.title}),g.sentiment&&e.jsx("span",{style:{marginLeft:"8px",fontSize:"11px",color:g.sentiment==="positive"?"#10b981":g.sentiment==="critical"?"#ef4444":"#6b7280",fontWeight:600,textTransform:"uppercase"},children:g.sentiment})]}),e.jsx("div",{className:"article-summary",children:g.summary})]},y))})]})]})]})},br={orange:{bg:"bg-orange-100",text:"text-orange-900",bar:"bg-orange-300"},purple:{bg:"bg-purple-100",text:"text-purple-900",bar:"bg-purple-300"},green:{bg:"bg-green-100",text:"text-green-900",bar:"bg-green-300"},blue:{bg:"bg-blue-100",text:"text-blue-900",bar:"bg-blue-300"},pink:{bg:"bg-pink-100",text:"text-pink-900",bar:"bg-pink-300"},lime:{bg:"bg-lime-100",text:"text-lime-900",bar:"bg-lime-300"}};function jr({title:t,description:s,timelineStart:n,timelineEnd:r,tooltipPositions:i,color:l}){const a=br[l],o=r-n;return e.jsxs("div",{className:"grid grid-cols-[330px_1fr] gap-4 mb-4",children:[e.jsxs("div",{className:`${a.bg} ${a.text} rounded-xl p-5`,children:[e.jsx("h3",{className:"font-bold text-base mb-2",children:t}),e.jsx("p",{className:"text-sm",children:s})]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-5 flex items-center",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-700 mb-2 px-1",children:[e.jsx("span",{children:n}),e.jsx("span",{children:r})]}),e.jsxs("div",{className:"relative h-8",children:[e.jsx("div",{className:"absolute top-3 left-0 right-0 h-2 bg-gray-200 rounded-full"}),e.jsx("div",{className:`absolute top-3 h-2 ${a.bar} rounded-full`,style:{left:"0%",width:"70%"}}),i.map((c,x)=>{const d=(c.year-n)/o*100;return e.jsxs("div",{className:"absolute top-0",style:{left:`${d}%`,transform:"translateX(-50%)"},children:[e.jsx("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:c.label}),e.jsx("div",{className:"w-2 h-2 bg-gray-800 rounded-full"})]},x)})]})]})})]})}function Nr({scenarios:t}){const s=t.filter(r=>r.probability==="Plausible"),n=t.filter(r=>r.probability==="Probable");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-8 relative",children:[e.jsx("button",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center",children:e.jsx(Xn,{className:"w-5 h-5 text-gray-700"})}),e.jsx("button",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center",children:e.jsx(Yn,{className:"w-5 h-5 text-gray-700"})}),e.jsxs("svg",{viewBox:"0 0 800 400",className:"w-full h-64",children:[e.jsx("path",{d:"M 50 350 Q 200 200, 750 100 L 750 320 Q 200 380, 50 350 Z",fill:"#FCD34D",opacity:"0.3"}),e.jsx("path",{d:"M 50 350 Q 200 220, 700 120 L 700 300 Q 200 370, 50 350 Z",fill:"#FCD34D",opacity:"0.4"}),e.jsx("path",{d:"M 50 350 Q 200 240, 650 140 L 650 280 Q 200 360, 50 350 Z",fill:"#FCD34D",opacity:"0.5"}),e.jsx("path",{d:"M 50 350 Q 200 260, 600 160 L 600 260 Q 200 350, 50 350 Z",fill:"#FCD34D",opacity:"0.6"}),e.jsx("path",{d:"M 50 350 Q 200 280, 550 180 L 550 240 Q 200 340, 50 350 Z",fill:"#FCD34D",opacity:"0.7"}),e.jsx("text",{x:"100",y:"340",fill:"#92400E",fontSize:"14",fontWeight:"600",children:"Plausible"}),e.jsx("text",{x:"200",y:"290",fill:"#92400E",fontSize:"14",fontWeight:"600",children:"Possible"}),e.jsx("text",{x:"300",y:"240",fill:"#92400E",fontSize:"14",fontWeight:"600",children:"Probable"}),e.jsx("text",{x:"400",y:"190",fill:"#92400E",fontSize:"14",fontWeight:"600",children:"Preferable"}),e.jsx("text",{x:"520",y:"140",fill:"#92400E",fontSize:"14",fontWeight:"600",children:"Wildcard"}),e.jsx("foreignObject",{x:"250",y:"220",width:"200",height:"80",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-semibold",children:"Legal Clarification"}),e.jsx("span",{className:"text-xs text-gray-500",children:"ğŸ“"})]}),e.jsx("p",{className:"text-xs text-gray-700",children:"Courts gradually clarify existing copyright law for AI content"})]})})]}),e.jsx("div",{className:"flex justify-between items-center mt-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full mx-auto mb-1"}),e.jsx("div",{className:"text-xs text-gray-700",children:"2025"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Present"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full mx-auto mb-1"}),e.jsx("div",{className:"text-xs text-gray-700",children:"2026"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Short-term"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full mx-auto mb-1"}),e.jsx("div",{className:"text-xs text-gray-700",children:"2027"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Mid-term"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full mx-auto mb-1"}),e.jsx("div",{className:"text-xs text-gray-700",children:"2028"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Long-term"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full mx-auto mb-1"}),e.jsx("div",{className:"text-xs text-gray-700",children:"2029"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Horizon"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"bg-yellow-100 text-yellow-900 px-4 py-2 rounded-t-xl font-semibold text-sm",children:"Plausible - Reasonably possible"}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-b-xl p-4 space-y-3",children:[s.length>0?s.map((r,i)=>e.jsx(ye,{scenario:r},i)):e.jsxs("div",{className:"space-y-3",children:[e.jsx(ye,{scenario:{title:"Legal Clarification",description:"Courts gradually clarify existing copyright law for AI content",probability:"Plausible",timeframe:"2025-2027",icon:"ğŸ“"}}),e.jsx(ye,{scenario:{title:"Legal Clarification",description:"Courts gradually clarify existing copyright law for AI content",probability:"Plausible",timeframe:"2025-2027",icon:"ğŸ“"}}),e.jsx(ye,{scenario:{title:"Legal Clarification",description:"Courts gradually clarify existing copyright law for AI content",probability:"Plausible",timeframe:"2025-2027",icon:"ğŸ“"}})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-300",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-700 mb-2",children:[e.jsx("span",{children:"2025"}),e.jsx("span",{children:"2026"}),e.jsx("span",{children:"2027"}),e.jsx("span",{children:"2028"}),e.jsx("span",{children:"2029"})]}),e.jsxs("div",{className:"relative h-2",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-full"}),e.jsx("div",{className:"absolute left-0 h-2 bg-yellow-400 rounded-full",style:{width:"40%"}})]})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"bg-blue-500 text-white px-4 py-2 rounded-t-xl font-semibold text-sm",children:"Probable - Most likely outcomes"}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-b-xl p-4 space-y-3",children:[n.length>0?n.map((r,i)=>e.jsx(ye,{scenario:r},i)):e.jsxs("div",{className:"space-y-3",children:[e.jsx(ye,{scenario:{title:"Legal Clarification",description:"Courts gradually clarify existing copyright law for AI content",probability:"Probable",timeframe:"2025-2027",icon:"ğŸ“"}}),e.jsx(ye,{scenario:{title:"Legal Clarification",description:"Courts gradually clarify existing copyright law for AI content",probability:"Probable",timeframe:"2025-2027",icon:"ğŸ“"}}),e.jsx(ye,{scenario:{title:"Legal Clarification",description:"Courts gradually clarify existing copyright law for AI content",probability:"Probable",timeframe:"2025-2027",icon:"ğŸ“"}})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-300",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-700 mb-2",children:[e.jsx("span",{children:"Present"}),e.jsx("span",{children:"2026"}),e.jsx("span",{children:"2027"}),e.jsx("span",{children:"2028"}),e.jsx("span",{children:"2029"})]}),e.jsxs("div",{className:"relative h-2",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-full"}),e.jsx("div",{className:"absolute left-0 h-2 bg-blue-500 rounded-full",style:{width:"60%"}})]})]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Icons Legend"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"ğŸ˜"}),e.jsx("span",{className:"text-sm text-gray-800",children:"Mixed/Neutral"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-yellow-500",children:"ğŸ˜ŠğŸ‘"}),e.jsx("span",{className:"text-sm text-gray-800",children:"Mixed/Positive"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-orange-500",children:"âš ï¸"}),e.jsx("span",{className:"text-sm text-gray-800",children:"Critical/Neutral"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-500",children:"âœ…"}),e.jsx("span",{className:"text-sm text-gray-800",children:"Positive"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-red-500",children:"âŒ"}),e.jsx("span",{className:"text-sm text-gray-800",children:"Negative/Disruptive"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-500",children:"ğŸ“ˆ"}),e.jsx("span",{className:"text-sm text-gray-800",children:"Evolution/Trend"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-purple-500",children:"ğŸ“"}),e.jsx("span",{className:"text-sm text-gray-800",children:"Trend/Evolution"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"âš ï¸"}),e.jsx("span",{className:"text-sm text-gray-800",children:"Disruption/Warning"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-pink-500",children:"ğŸš€"}),e.jsx("span",{className:"text-sm text-gray-800",children:"Breakthrough"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-amber-500",children:"âš¡"}),e.jsx("span",{className:"text-sm text-gray-800",children:"Warning/Disruption"})]})]})]})]})}function ye({scenario:t}){return e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-sm",children:t.title}),t.icon&&e.jsx("span",{className:"text-sm",children:t.icon})]}),e.jsx("p",{className:"text-xs text-gray-700",children:t.description})]}),e.jsx("button",{className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})})}function ts({className:t,type:s,...n}){return e.jsx("input",{type:s,"data-slot":"input",className:le("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}function ss(t,[s,n]){return Math.min(n,Math.max(s,t))}function wr(t){const s=t+"CollectionProvider",[n,r]=$t(s),[i,l]=n(s,{collectionRef:{current:null},itemMap:new Map}),a=p=>{const{scope:b,children:w}=p,j=_e.useRef(null),C=_e.useRef(new Map).current;return e.jsx(i,{scope:b,itemMap:C,collectionRef:j,children:w})};a.displayName=s;const o=t+"CollectionSlot",c=At(o),x=_e.forwardRef((p,b)=>{const{scope:w,children:j}=p,C=l(o,w),g=Y(b,C.collectionRef);return e.jsx(c,{ref:g,children:j})});x.displayName=o;const d=t+"CollectionItemSlot",f="data-radix-collection-item",N=At(d),u=_e.forwardRef((p,b)=>{const{scope:w,children:j,...C}=p,g=_e.useRef(null),y=Y(b,g),_=l(d,w);return _e.useEffect(()=>(_.itemMap.set(g,{ref:g,...C}),()=>void _.itemMap.delete(g))),e.jsx(N,{[f]:"",ref:y,children:j})});u.displayName=d;function v(p){const b=l(t+"CollectionConsumer",p);return _e.useCallback(()=>{const j=b.collectionRef.current;if(!j)return[];const C=Array.from(j.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((_,k)=>C.indexOf(_.ref.current)-C.indexOf(k.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:x,ItemSlot:u},v,r]}var Cr=h.createContext(void 0);function Sr(t){const s=h.useContext(Cr);return t||s||"ltr"}const kr=["top","right","bottom","left"],be=Math.min,J=Math.max,nt=Math.round,et=Math.floor,xe=t=>({x:t,y:t}),_r={left:"right",right:"left",bottom:"top",top:"bottom"},Ar={start:"end",end:"start"};function Pt(t,s,n){return J(t,be(s,n))}function pe(t,s){return typeof t=="function"?t(s):t}function fe(t){return t.split("-")[0]}function De(t){return t.split("-")[1]}function Vt(t){return t==="x"?"y":"x"}function Bt(t){return t==="y"?"height":"width"}const Pr=new Set(["top","bottom"]);function me(t){return Pr.has(fe(t))?"y":"x"}function Ht(t){return Vt(me(t))}function Tr(t,s,n){n===void 0&&(n=!1);const r=De(t),i=Ht(t),l=Bt(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return s.reference[l]>s.floating[l]&&(a=rt(a)),[a,rt(a)]}function Ir(t){const s=rt(t);return[Tt(t),s,Tt(s)]}function Tt(t){return t.replace(/start|end/g,s=>Ar[s])}const ns=["left","right"],rs=["right","left"],Er=["top","bottom"],Rr=["bottom","top"];function Or(t,s,n){switch(t){case"top":case"bottom":return n?s?rs:ns:s?ns:rs;case"left":case"right":return s?Er:Rr;default:return[]}}function Mr(t,s,n,r){const i=De(t);let l=Or(fe(t),n==="start",r);return i&&(l=l.map(a=>a+"-"+i),s&&(l=l.concat(l.map(Tt)))),l}function rt(t){return t.replace(/left|right|bottom|top/g,s=>_r[s])}function Lr(t){return{top:0,right:0,bottom:0,left:0,...t}}function js(t){return typeof t!="number"?Lr(t):{top:t,right:t,bottom:t,left:t}}function it(t){const{x:s,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:s,right:s+r,bottom:n+i,x:s,y:n}}function is(t,s,n){let{reference:r,floating:i}=t;const l=me(s),a=Ht(s),o=Bt(a),c=fe(s),x=l==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,N=r[o]/2-i[o]/2;let u;switch(c){case"top":u={x:d,y:r.y-i.height};break;case"bottom":u={x:d,y:r.y+r.height};break;case"right":u={x:r.x+r.width,y:f};break;case"left":u={x:r.x-i.width,y:f};break;default:u={x:r.x,y:r.y}}switch(De(s)){case"start":u[a]-=N*(n&&x?-1:1);break;case"end":u[a]+=N*(n&&x?-1:1);break}return u}const Dr=async(t,s,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:l=[],platform:a}=n,o=l.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(s));let x=await a.getElementRects({reference:t,floating:s,strategy:i}),{x:d,y:f}=is(x,r,c),N=r,u={},v=0;for(let p=0;p<o.length;p++){const{name:b,fn:w}=o[p],{x:j,y:C,data:g,reset:y}=await w({x:d,y:f,initialPlacement:r,placement:N,strategy:i,middlewareData:u,rects:x,platform:a,elements:{reference:t,floating:s}});d=j??d,f=C??f,u={...u,[b]:{...u[b],...g}},y&&v<=50&&(v++,typeof y=="object"&&(y.placement&&(N=y.placement),y.rects&&(x=y.rects===!0?await a.getElementRects({reference:t,floating:s,strategy:i}):y.rects),{x:d,y:f}=is(x,N,c)),p=-1)}return{x:d,y:f,placement:N,strategy:i,middlewareData:u}};async function Xe(t,s){var n;s===void 0&&(s={});const{x:r,y:i,platform:l,rects:a,elements:o,strategy:c}=t,{boundary:x="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:N=!1,padding:u=0}=pe(s,t),v=js(u),b=o[N?f==="floating"?"reference":"floating":f],w=it(await l.getClippingRect({element:(n=await(l.isElement==null?void 0:l.isElement(b)))==null||n?b:b.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(o.floating)),boundary:x,rootBoundary:d,strategy:c})),j=f==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,C=await(l.getOffsetParent==null?void 0:l.getOffsetParent(o.floating)),g=await(l.isElement==null?void 0:l.isElement(C))?await(l.getScale==null?void 0:l.getScale(C))||{x:1,y:1}:{x:1,y:1},y=it(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:j,offsetParent:C,strategy:c}):j);return{top:(w.top-y.top+v.top)/g.y,bottom:(y.bottom-w.bottom+v.bottom)/g.y,left:(w.left-y.left+v.left)/g.x,right:(y.right-w.right+v.right)/g.x}}const $r=t=>({name:"arrow",options:t,async fn(s){const{x:n,y:r,placement:i,rects:l,platform:a,elements:o,middlewareData:c}=s,{element:x,padding:d=0}=pe(t,s)||{};if(x==null)return{};const f=js(d),N={x:n,y:r},u=Ht(i),v=Bt(u),p=await a.getDimensions(x),b=u==="y",w=b?"top":"left",j=b?"bottom":"right",C=b?"clientHeight":"clientWidth",g=l.reference[v]+l.reference[u]-N[u]-l.floating[v],y=N[u]-l.reference[u],_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(x));let k=_?_[C]:0;(!k||!await(a.isElement==null?void 0:a.isElement(_)))&&(k=o.floating[C]||l.floating[v]);const T=g/2-y/2,L=k/2-p[v]/2-1,D=be(f[w],L),A=be(f[j],L),m=D,S=k-p[v]-A,P=k/2-p[v]/2+T,O=Pt(m,P,S),M=!c.arrow&&De(i)!=null&&P!==O&&l.reference[v]/2-(P<m?D:A)-p[v]/2<0,$=M?P<m?P-m:P-S:0;return{[u]:N[u]+$,data:{[u]:O,centerOffset:P-O-$,...M&&{alignmentOffset:$}},reset:M}}}),zr=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var n,r;const{placement:i,middlewareData:l,rects:a,initialPlacement:o,platform:c,elements:x}=s,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:N,fallbackStrategy:u="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:p=!0,...b}=pe(t,s);if((n=l.arrow)!=null&&n.alignmentOffset)return{};const w=fe(i),j=me(o),C=fe(o)===o,g=await(c.isRTL==null?void 0:c.isRTL(x.floating)),y=N||(C||!p?[rt(o)]:Ir(o)),_=v!=="none";!N&&_&&y.push(...Mr(o,p,v,g));const k=[o,...y],T=await Xe(s,b),L=[];let D=((r=l.flip)==null?void 0:r.overflows)||[];if(d&&L.push(T[w]),f){const P=Tr(i,a,g);L.push(T[P[0]],T[P[1]])}if(D=[...D,{placement:i,overflows:L}],!L.every(P=>P<=0)){var A,m;const P=(((A=l.flip)==null?void 0:A.index)||0)+1,O=k[P];if(O&&(!(f==="alignment"?j!==me(O):!1)||D.every(E=>me(E.placement)===j?E.overflows[0]>0:!0)))return{data:{index:P,overflows:D},reset:{placement:O}};let M=(m=D.filter($=>$.overflows[0]<=0).sort(($,E)=>$.overflows[1]-E.overflows[1])[0])==null?void 0:m.placement;if(!M)switch(u){case"bestFit":{var S;const $=(S=D.filter(E=>{if(_){const z=me(E.placement);return z===j||z==="y"}return!0}).map(E=>[E.placement,E.overflows.filter(z=>z>0).reduce((z,q)=>z+q,0)]).sort((E,z)=>E[1]-z[1])[0])==null?void 0:S[0];$&&(M=$);break}case"initialPlacement":M=o;break}if(i!==M)return{reset:{placement:M}}}return{}}}};function as(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function ls(t){return kr.some(s=>t[s]>=0)}const Fr=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:n}=s,{strategy:r="referenceHidden",...i}=pe(t,s);switch(r){case"referenceHidden":{const l=await Xe(s,{...i,elementContext:"reference"}),a=as(l,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:ls(a)}}}case"escaped":{const l=await Xe(s,{...i,altBoundary:!0}),a=as(l,n.floating);return{data:{escapedOffsets:a,escaped:ls(a)}}}default:return{}}}}},Ns=new Set(["left","top"]);async function Vr(t,s){const{placement:n,platform:r,elements:i}=t,l=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=fe(n),o=De(n),c=me(n)==="y",x=Ns.has(a)?-1:1,d=l&&c?-1:1,f=pe(s,t);let{mainAxis:N,crossAxis:u,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof v=="number"&&(u=o==="end"?v*-1:v),c?{x:u*d,y:N*x}:{x:N*x,y:u*d}}const Br=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var n,r;const{x:i,y:l,placement:a,middlewareData:o}=s,c=await Vr(s,t);return a===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:l+c.y,data:{...c,placement:a}}}}},Hr=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:n,y:r,placement:i}=s,{mainAxis:l=!0,crossAxis:a=!1,limiter:o={fn:b=>{let{x:w,y:j}=b;return{x:w,y:j}}},...c}=pe(t,s),x={x:n,y:r},d=await Xe(s,c),f=me(fe(i)),N=Vt(f);let u=x[N],v=x[f];if(l){const b=N==="y"?"top":"left",w=N==="y"?"bottom":"right",j=u+d[b],C=u-d[w];u=Pt(j,u,C)}if(a){const b=f==="y"?"top":"left",w=f==="y"?"bottom":"right",j=v+d[b],C=v-d[w];v=Pt(j,v,C)}const p=o.fn({...s,[N]:u,[f]:v});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[N]:l,[f]:a}}}}}},Wr=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:n,y:r,placement:i,rects:l,middlewareData:a}=s,{offset:o=0,mainAxis:c=!0,crossAxis:x=!0}=pe(t,s),d={x:n,y:r},f=me(i),N=Vt(f);let u=d[N],v=d[f];const p=pe(o,s),b=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const C=N==="y"?"height":"width",g=l.reference[N]-l.floating[C]+b.mainAxis,y=l.reference[N]+l.reference[C]-b.mainAxis;u<g?u=g:u>y&&(u=y)}if(x){var w,j;const C=N==="y"?"width":"height",g=Ns.has(fe(i)),y=l.reference[f]-l.floating[C]+(g&&((w=a.offset)==null?void 0:w[f])||0)+(g?0:b.crossAxis),_=l.reference[f]+l.reference[C]+(g?0:((j=a.offset)==null?void 0:j[f])||0)-(g?b.crossAxis:0);v<y?v=y:v>_&&(v=_)}return{[N]:u,[f]:v}}}},Kr=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var n,r;const{placement:i,rects:l,platform:a,elements:o}=s,{apply:c=()=>{},...x}=pe(t,s),d=await Xe(s,x),f=fe(i),N=De(i),u=me(i)==="y",{width:v,height:p}=l.floating;let b,w;f==="top"||f==="bottom"?(b=f,w=N===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(w=f,b=N==="end"?"top":"bottom");const j=p-d.top-d.bottom,C=v-d.left-d.right,g=be(p-d[b],j),y=be(v-d[w],C),_=!s.middlewareData.shift;let k=g,T=y;if((n=s.middlewareData.shift)!=null&&n.enabled.x&&(T=C),(r=s.middlewareData.shift)!=null&&r.enabled.y&&(k=j),_&&!N){const D=J(d.left,0),A=J(d.right,0),m=J(d.top,0),S=J(d.bottom,0);u?T=v-2*(D!==0||A!==0?D+A:J(d.left,d.right)):k=p-2*(m!==0||S!==0?m+S:J(d.top,d.bottom))}await c({...s,availableWidth:T,availableHeight:k});const L=await a.getDimensions(o.floating);return v!==L.width||p!==L.height?{reset:{rects:!0}}:{}}}};function ct(){return typeof window<"u"}function $e(t){return ws(t)?(t.nodeName||"").toLowerCase():"#document"}function re(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function he(t){var s;return(s=(ws(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function ws(t){return ct()?t instanceof Node||t instanceof re(t).Node:!1}function ce(t){return ct()?t instanceof Element||t instanceof re(t).Element:!1}function ue(t){return ct()?t instanceof HTMLElement||t instanceof re(t).HTMLElement:!1}function os(t){return!ct()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof re(t).ShadowRoot}const Ur=new Set(["inline","contents"]);function Ye(t){const{overflow:s,overflowX:n,overflowY:r,display:i}=de(t);return/auto|scroll|overlay|hidden|clip/.test(s+r+n)&&!Ur.has(i)}const Gr=new Set(["table","td","th"]);function Xr(t){return Gr.has($e(t))}const qr=[":popover-open",":modal"];function dt(t){return qr.some(s=>{try{return t.matches(s)}catch{return!1}})}const Yr=["transform","translate","scale","rotate","perspective"],Zr=["transform","translate","scale","rotate","perspective","filter"],Qr=["paint","layout","strict","content"];function Wt(t){const s=Kt(),n=ce(t)?de(t):t;return Yr.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!s&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!s&&(n.filter?n.filter!=="none":!1)||Zr.some(r=>(n.willChange||"").includes(r))||Qr.some(r=>(n.contain||"").includes(r))}function Jr(t){let s=je(t);for(;ue(s)&&!Le(s);){if(Wt(s))return s;if(dt(s))return null;s=je(s)}return null}function Kt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ei=new Set(["html","body","#document"]);function Le(t){return ei.has($e(t))}function de(t){return re(t).getComputedStyle(t)}function mt(t){return ce(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function je(t){if($e(t)==="html")return t;const s=t.assignedSlot||t.parentNode||os(t)&&t.host||he(t);return os(s)?s.host:s}function Cs(t){const s=je(t);return Le(s)?t.ownerDocument?t.ownerDocument.body:t.body:ue(s)&&Ye(s)?s:Cs(s)}function qe(t,s,n){var r;s===void 0&&(s=[]),n===void 0&&(n=!0);const i=Cs(t),l=i===((r=t.ownerDocument)==null?void 0:r.body),a=re(i);if(l){const o=It(a);return s.concat(a,a.visualViewport||[],Ye(i)?i:[],o&&n?qe(o):[])}return s.concat(i,qe(i,[],n))}function It(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Ss(t){const s=de(t);let n=parseFloat(s.width)||0,r=parseFloat(s.height)||0;const i=ue(t),l=i?t.offsetWidth:n,a=i?t.offsetHeight:r,o=nt(n)!==l||nt(r)!==a;return o&&(n=l,r=a),{width:n,height:r,$:o}}function Ut(t){return ce(t)?t:t.contextElement}function Me(t){const s=Ut(t);if(!ue(s))return xe(1);const n=s.getBoundingClientRect(),{width:r,height:i,$:l}=Ss(s);let a=(l?nt(n.width):n.width)/r,o=(l?nt(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const ti=xe(0);function ks(t){const s=re(t);return!Kt()||!s.visualViewport?ti:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function si(t,s,n){return s===void 0&&(s=!1),!n||s&&n!==re(t)?!1:s}function Ie(t,s,n,r){s===void 0&&(s=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),l=Ut(t);let a=xe(1);s&&(r?ce(r)&&(a=Me(r)):a=Me(t));const o=si(l,n,r)?ks(l):xe(0);let c=(i.left+o.x)/a.x,x=(i.top+o.y)/a.y,d=i.width/a.x,f=i.height/a.y;if(l){const N=re(l),u=r&&ce(r)?re(r):r;let v=N,p=It(v);for(;p&&r&&u!==v;){const b=Me(p),w=p.getBoundingClientRect(),j=de(p),C=w.left+(p.clientLeft+parseFloat(j.paddingLeft))*b.x,g=w.top+(p.clientTop+parseFloat(j.paddingTop))*b.y;c*=b.x,x*=b.y,d*=b.x,f*=b.y,c+=C,x+=g,v=re(p),p=It(v)}}return it({width:d,height:f,x:c,y:x})}function xt(t,s){const n=mt(t).scrollLeft;return s?s.left+n:Ie(he(t)).left+n}function _s(t,s){const n=t.getBoundingClientRect(),r=n.left+s.scrollLeft-xt(t,n),i=n.top+s.scrollTop;return{x:r,y:i}}function ni(t){let{elements:s,rect:n,offsetParent:r,strategy:i}=t;const l=i==="fixed",a=he(r),o=s?dt(s.floating):!1;if(r===a||o&&l)return n;let c={scrollLeft:0,scrollTop:0},x=xe(1);const d=xe(0),f=ue(r);if((f||!f&&!l)&&(($e(r)!=="body"||Ye(a))&&(c=mt(r)),ue(r))){const u=Ie(r);x=Me(r),d.x=u.x+r.clientLeft,d.y=u.y+r.clientTop}const N=a&&!f&&!l?_s(a,c):xe(0);return{width:n.width*x.x,height:n.height*x.y,x:n.x*x.x-c.scrollLeft*x.x+d.x+N.x,y:n.y*x.y-c.scrollTop*x.y+d.y+N.y}}function ri(t){return Array.from(t.getClientRects())}function ii(t){const s=he(t),n=mt(t),r=t.ownerDocument.body,i=J(s.scrollWidth,s.clientWidth,r.scrollWidth,r.clientWidth),l=J(s.scrollHeight,s.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+xt(t);const o=-n.scrollTop;return de(r).direction==="rtl"&&(a+=J(s.clientWidth,r.clientWidth)-i),{width:i,height:l,x:a,y:o}}const cs=25;function ai(t,s){const n=re(t),r=he(t),i=n.visualViewport;let l=r.clientWidth,a=r.clientHeight,o=0,c=0;if(i){l=i.width,a=i.height;const d=Kt();(!d||d&&s==="fixed")&&(o=i.offsetLeft,c=i.offsetTop)}const x=xt(r);if(x<=0){const d=r.ownerDocument,f=d.body,N=getComputedStyle(f),u=d.compatMode==="CSS1Compat"&&parseFloat(N.marginLeft)+parseFloat(N.marginRight)||0,v=Math.abs(r.clientWidth-f.clientWidth-u);v<=cs&&(l-=v)}else x<=cs&&(l+=x);return{width:l,height:a,x:o,y:c}}const li=new Set(["absolute","fixed"]);function oi(t,s){const n=Ie(t,!0,s==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,l=ue(t)?Me(t):xe(1),a=t.clientWidth*l.x,o=t.clientHeight*l.y,c=i*l.x,x=r*l.y;return{width:a,height:o,x:c,y:x}}function ds(t,s,n){let r;if(s==="viewport")r=ai(t,n);else if(s==="document")r=ii(he(t));else if(ce(s))r=oi(s,n);else{const i=ks(t);r={x:s.x-i.x,y:s.y-i.y,width:s.width,height:s.height}}return it(r)}function As(t,s){const n=je(t);return n===s||!ce(n)||Le(n)?!1:de(n).position==="fixed"||As(n,s)}function ci(t,s){const n=s.get(t);if(n)return n;let r=qe(t,[],!1).filter(o=>ce(o)&&$e(o)!=="body"),i=null;const l=de(t).position==="fixed";let a=l?je(t):t;for(;ce(a)&&!Le(a);){const o=de(a),c=Wt(a);!c&&o.position==="fixed"&&(i=null),(l?!c&&!i:!c&&o.position==="static"&&!!i&&li.has(i.position)||Ye(a)&&!c&&As(t,a))?r=r.filter(d=>d!==a):i=o,a=je(a)}return s.set(t,r),r}function di(t){let{element:s,boundary:n,rootBoundary:r,strategy:i}=t;const a=[...n==="clippingAncestors"?dt(s)?[]:ci(s,this._c):[].concat(n),r],o=a[0],c=a.reduce((x,d)=>{const f=ds(s,d,i);return x.top=J(f.top,x.top),x.right=be(f.right,x.right),x.bottom=be(f.bottom,x.bottom),x.left=J(f.left,x.left),x},ds(s,o,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function mi(t){const{width:s,height:n}=Ss(t);return{width:s,height:n}}function xi(t,s,n){const r=ue(s),i=he(s),l=n==="fixed",a=Ie(t,!0,l,s);let o={scrollLeft:0,scrollTop:0};const c=xe(0);function x(){c.x=xt(i)}if(r||!r&&!l)if(($e(s)!=="body"||Ye(i))&&(o=mt(s)),r){const u=Ie(s,!0,l,s);c.x=u.x+s.clientLeft,c.y=u.y+s.clientTop}else i&&x();l&&!r&&i&&x();const d=i&&!r&&!l?_s(i,o):xe(0),f=a.left+o.scrollLeft-c.x-d.x,N=a.top+o.scrollTop-c.y-d.y;return{x:f,y:N,width:a.width,height:a.height}}function kt(t){return de(t).position==="static"}function ms(t,s){if(!ue(t)||de(t).position==="fixed")return null;if(s)return s(t);let n=t.offsetParent;return he(t)===n&&(n=n.ownerDocument.body),n}function Ps(t,s){const n=re(t);if(dt(t))return n;if(!ue(t)){let i=je(t);for(;i&&!Le(i);){if(ce(i)&&!kt(i))return i;i=je(i)}return n}let r=ms(t,s);for(;r&&Xr(r)&&kt(r);)r=ms(r,s);return r&&Le(r)&&kt(r)&&!Wt(r)?n:r||Jr(t)||n}const ui=async function(t){const s=this.getOffsetParent||Ps,n=this.getDimensions,r=await n(t.floating);return{reference:xi(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function hi(t){return de(t).direction==="rtl"}const pi={convertOffsetParentRelativeRectToViewportRelativeRect:ni,getDocumentElement:he,getClippingRect:di,getOffsetParent:Ps,getElementRects:ui,getClientRects:ri,getDimensions:mi,getScale:Me,isElement:ce,isRTL:hi};function Ts(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function fi(t,s){let n=null,r;const i=he(t);function l(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function a(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),l();const x=t.getBoundingClientRect(),{left:d,top:f,width:N,height:u}=x;if(o||s(),!N||!u)return;const v=et(f),p=et(i.clientWidth-(d+N)),b=et(i.clientHeight-(f+u)),w=et(d),C={rootMargin:-v+"px "+-p+"px "+-b+"px "+-w+"px",threshold:J(0,be(1,c))||1};let g=!0;function y(_){const k=_[0].intersectionRatio;if(k!==c){if(!g)return a();k?a(!1,k):r=setTimeout(()=>{a(!1,1e-7)},1e3)}k===1&&!Ts(x,t.getBoundingClientRect())&&a(),g=!1}try{n=new IntersectionObserver(y,{...C,root:i.ownerDocument})}catch{n=new IntersectionObserver(y,C)}n.observe(t)}return a(!0),l}function gi(t,s,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:l=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,x=Ut(t),d=i||l?[...x?qe(x):[],...qe(s)]:[];d.forEach(w=>{i&&w.addEventListener("scroll",n,{passive:!0}),l&&w.addEventListener("resize",n)});const f=x&&o?fi(x,n):null;let N=-1,u=null;a&&(u=new ResizeObserver(w=>{let[j]=w;j&&j.target===x&&u&&(u.unobserve(s),cancelAnimationFrame(N),N=requestAnimationFrame(()=>{var C;(C=u)==null||C.observe(s)})),n()}),x&&!c&&u.observe(x),u.observe(s));let v,p=c?Ie(t):null;c&&b();function b(){const w=Ie(t);p&&!Ts(p,w)&&n(),p=w,v=requestAnimationFrame(b)}return n(),()=>{var w;d.forEach(j=>{i&&j.removeEventListener("scroll",n),l&&j.removeEventListener("resize",n)}),f?.(),(w=u)==null||w.disconnect(),u=null,c&&cancelAnimationFrame(v)}}const yi=Br,vi=Hr,bi=zr,ji=Kr,Ni=Fr,xs=$r,wi=Wr,Ci=(t,s,n)=>{const r=new Map,i={platform:pi,...n},l={...i.platform,_c:r};return Dr(t,s,{...i,platform:l})};var Si=typeof document<"u",ki=function(){},tt=Si?h.useLayoutEffect:ki;function at(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let n,r,i;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==s.length)return!1;for(r=n;r--!==0;)if(!at(t[r],s[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(s).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(s,i[r]))return!1;for(r=n;r--!==0;){const l=i[r];if(!(l==="_owner"&&t.$$typeof)&&!at(t[l],s[l]))return!1}return!0}return t!==t&&s!==s}function Is(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function us(t,s){const n=Is(t);return Math.round(s*n)/n}function _t(t){const s=h.useRef(t);return tt(()=>{s.current=t}),s}function _i(t){t===void 0&&(t={});const{placement:s="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:l,floating:a}={},transform:o=!0,whileElementsMounted:c,open:x}=t,[d,f]=h.useState({x:0,y:0,strategy:n,placement:s,middlewareData:{},isPositioned:!1}),[N,u]=h.useState(r);at(N,r)||u(r);const[v,p]=h.useState(null),[b,w]=h.useState(null),j=h.useCallback(E=>{E!==_.current&&(_.current=E,p(E))},[]),C=h.useCallback(E=>{E!==k.current&&(k.current=E,w(E))},[]),g=l||v,y=a||b,_=h.useRef(null),k=h.useRef(null),T=h.useRef(d),L=c!=null,D=_t(c),A=_t(i),m=_t(x),S=h.useCallback(()=>{if(!_.current||!k.current)return;const E={placement:s,strategy:n,middleware:N};A.current&&(E.platform=A.current),Ci(_.current,k.current,E).then(z=>{const q={...z,isPositioned:m.current!==!1};P.current&&!at(T.current,q)&&(T.current=q,zt.flushSync(()=>{f(q)}))})},[N,s,n,A,m]);tt(()=>{x===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(E=>({...E,isPositioned:!1})))},[x]);const P=h.useRef(!1);tt(()=>(P.current=!0,()=>{P.current=!1}),[]),tt(()=>{if(g&&(_.current=g),y&&(k.current=y),g&&y){if(D.current)return D.current(g,y,S);S()}},[g,y,S,D,L]);const O=h.useMemo(()=>({reference:_,floating:k,setReference:j,setFloating:C}),[j,C]),M=h.useMemo(()=>({reference:g,floating:y}),[g,y]),$=h.useMemo(()=>{const E={position:n,left:0,top:0};if(!M.floating)return E;const z=us(M.floating,d.x),q=us(M.floating,d.y);return o?{...E,transform:"translate("+z+"px, "+q+"px)",...Is(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:q}},[n,o,M.floating,d.x,d.y]);return h.useMemo(()=>({...d,update:S,refs:O,elements:M,floatingStyles:$}),[d,S,O,M,$])}const Ai=t=>{function s(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&s(r)?r.current!=null?xs({element:r.current,padding:i}).fn(n):{}:r?xs({element:r,padding:i}).fn(n):{}}}},Pi=(t,s)=>({...yi(t),options:[t,s]}),Ti=(t,s)=>({...vi(t),options:[t,s]}),Ii=(t,s)=>({...wi(t),options:[t,s]}),Ei=(t,s)=>({...bi(t),options:[t,s]}),Ri=(t,s)=>({...ji(t),options:[t,s]}),Oi=(t,s)=>({...Ni(t),options:[t,s]}),Mi=(t,s)=>({...Ai(t),options:[t,s]});var Li="Arrow",Es=h.forwardRef((t,s)=>{const{children:n,width:r=10,height:i=5,...l}=t;return e.jsx(U.svg,{...l,ref:s,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});Es.displayName=Li;var Di=Es;function $i(t){const[s,n]=h.useState(void 0);return oe(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const l=i[0];let a,o;if("borderBoxSize"in l){const c=l.borderBoxSize,x=Array.isArray(c)?c[0]:c;a=x.inlineSize,o=x.blockSize}else a=t.offsetWidth,o=t.offsetHeight;n({width:a,height:o})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),s}var Gt="Popper",[Rs,Os]=$t(Gt),[zi,Ms]=Rs(Gt),Ls=t=>{const{__scopePopper:s,children:n}=t,[r,i]=h.useState(null);return e.jsx(zi,{scope:s,anchor:r,onAnchorChange:i,children:n})};Ls.displayName=Gt;var Ds="PopperAnchor",$s=h.forwardRef((t,s)=>{const{__scopePopper:n,virtualRef:r,...i}=t,l=Ms(Ds,n),a=h.useRef(null),o=Y(s,a),c=h.useRef(null);return h.useEffect(()=>{const x=c.current;c.current=r?.current||a.current,x!==c.current&&l.onAnchorChange(c.current)}),r?null:e.jsx(U.div,{...i,ref:o})});$s.displayName=Ds;var Xt="PopperContent",[Fi,Vi]=Rs(Xt),zs=h.forwardRef((t,s)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:l="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:x=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:N=!1,updatePositionStrategy:u="optimized",onPlaced:v,...p}=t,b=Ms(Xt,n),[w,j]=h.useState(null),C=Y(s,I=>j(I)),[g,y]=h.useState(null),_=$i(g),k=_?.width??0,T=_?.height??0,L=r+(l!=="center"?"-"+l:""),D=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},A=Array.isArray(x)?x:[x],m=A.length>0,S={padding:D,boundary:A.filter(Hi),altBoundary:m},{refs:P,floatingStyles:O,placement:M,isPositioned:$,middlewareData:E}=_i({strategy:"fixed",placement:L,whileElementsMounted:(...I)=>gi(...I,{animationFrame:u==="always"}),elements:{reference:b.anchor},middleware:[Pi({mainAxis:i+T,alignmentAxis:a}),c&&Ti({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Ii():void 0,...S}),c&&Ei({...S}),Ri({...S,apply:({elements:I,rects:B,availableWidth:G,availableHeight:F})=>{const{width:V,height:H}=B.reference,ie=I.floating.style;ie.setProperty("--radix-popper-available-width",`${G}px`),ie.setProperty("--radix-popper-available-height",`${F}px`),ie.setProperty("--radix-popper-anchor-width",`${V}px`),ie.setProperty("--radix-popper-anchor-height",`${H}px`)}}),g&&Mi({element:g,padding:o}),Wi({arrowWidth:k,arrowHeight:T}),N&&Oi({strategy:"referenceHidden",...S})]}),[z,q]=Bs(M),Ce=gs(v);oe(()=>{$&&Ce?.()},[$,Ce]);const Fe=E.arrow?.x,Ve=E.arrow?.y,ge=E.arrow?.centerOffset!==0,[Oe,Se]=h.useState();return oe(()=>{w&&Se(window.getComputedStyle(w).zIndex)},[w]),e.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...O,transform:$?O.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Oe,"--radix-popper-transform-origin":[E.transformOrigin?.x,E.transformOrigin?.y].join(" "),...E.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(Fi,{scope:n,placedSide:z,onArrowChange:y,arrowX:Fe,arrowY:Ve,shouldHideArrow:ge,children:e.jsx(U.div,{"data-side":z,"data-align":q,...p,ref:C,style:{...p.style,animation:$?void 0:"none"}})})})});zs.displayName=Xt;var Fs="PopperArrow",Bi={top:"bottom",right:"left",bottom:"top",left:"right"},Vs=h.forwardRef(function(s,n){const{__scopePopper:r,...i}=s,l=Vi(Fs,r),a=Bi[l.placedSide];return e.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:e.jsx(Di,{...i,ref:n,style:{...i.style,display:"block"}})})});Vs.displayName=Fs;function Hi(t){return t!==null}var Wi=t=>({name:"transformOrigin",options:t,fn(s){const{placement:n,rects:r,middlewareData:i}=s,a=i.arrow?.centerOffset!==0,o=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[x,d]=Bs(n),f={start:"0%",center:"50%",end:"100%"}[d],N=(i.arrow?.x??0)+o/2,u=(i.arrow?.y??0)+c/2;let v="",p="";return x==="bottom"?(v=a?f:`${N}px`,p=`${-c}px`):x==="top"?(v=a?f:`${N}px`,p=`${r.floating.height+c}px`):x==="right"?(v=`${-c}px`,p=a?f:`${u}px`):x==="left"&&(v=`${r.floating.width+c}px`,p=a?f:`${u}px`),{data:{x:v,y:p}}}});function Bs(t){const[s,n="center"]=t.split("-");return[s,n]}var Ki=Ls,Ui=$s,Gi=zs,Xi=Vs;function qi(t){const s=h.useRef({value:t,previous:t});return h.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var Hs=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Yi="VisuallyHidden",Zi=h.forwardRef((t,s)=>e.jsx(U.span,{...t,ref:s,style:{...Hs,...t.style}}));Zi.displayName=Yi;var Qi=[" ","Enter","ArrowUp","ArrowDown"],Ji=[" ","Enter"],Ee="Select",[ut,ht,ea]=wr(Ee),[ze]=$t(Ee,[ea,Os]),pt=Os(),[ta,Ne]=ze(Ee),[sa,na]=ze(Ee),Ws=t=>{const{__scopeSelect:s,children:n,open:r,defaultOpen:i,onOpenChange:l,value:a,defaultValue:o,onValueChange:c,dir:x,name:d,autoComplete:f,disabled:N,required:u,form:v}=t,p=pt(s),[b,w]=h.useState(null),[j,C]=h.useState(null),[g,y]=h.useState(!1),_=Sr(x),[k,T]=Yt({prop:r,defaultProp:i??!1,onChange:l,caller:Ee}),[L,D]=Yt({prop:a,defaultProp:o,onChange:c,caller:Ee}),A=h.useRef(null),m=b?v||!!b.closest("form"):!0,[S,P]=h.useState(new Set),O=Array.from(S).map(M=>M.props.value).join(";");return e.jsx(Ki,{...p,children:e.jsxs(ta,{required:u,scope:s,trigger:b,onTriggerChange:w,valueNode:j,onValueNodeChange:C,valueNodeHasChildren:g,onValueNodeHasChildrenChange:y,contentId:Ft(),value:L,onValueChange:D,open:k,onOpenChange:T,dir:_,triggerPointerDownPosRef:A,disabled:N,children:[e.jsx(ut.Provider,{scope:s,children:e.jsx(sa,{scope:t.__scopeSelect,onNativeOptionAdd:h.useCallback(M=>{P($=>new Set($).add(M))},[]),onNativeOptionRemove:h.useCallback(M=>{P($=>{const E=new Set($);return E.delete(M),E})},[]),children:n})}),m?e.jsxs(un,{"aria-hidden":!0,required:u,tabIndex:-1,name:d,autoComplete:f,value:L,onChange:M=>D(M.target.value),disabled:N,form:v,children:[L===void 0?e.jsx("option",{value:""}):null,Array.from(S)]},O):null]})})};Ws.displayName=Ee;var Ks="SelectTrigger",Us=h.forwardRef((t,s)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,l=pt(n),a=Ne(Ks,n),o=a.disabled||r,c=Y(s,a.onTriggerChange),x=ht(n),d=h.useRef("touch"),[f,N,u]=pn(p=>{const b=x().filter(C=>!C.disabled),w=b.find(C=>C.value===a.value),j=fn(b,p,w);j!==void 0&&a.onValueChange(j.value)}),v=p=>{o||(a.onOpenChange(!0),u()),p&&(a.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return e.jsx(Ui,{asChild:!0,...l,children:e.jsx(U.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":hn(a.value)?"":void 0,...i,ref:c,onClick:K(i.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&v(p)}),onPointerDown:K(i.onPointerDown,p=>{d.current=p.pointerType;const b=p.target;b.hasPointerCapture(p.pointerId)&&b.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(v(p),p.preventDefault())}),onKeyDown:K(i.onKeyDown,p=>{const b=f.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&N(p.key),!(b&&p.key===" ")&&Qi.includes(p.key)&&(v(),p.preventDefault())})})})});Us.displayName=Ks;var Gs="SelectValue",Xs=h.forwardRef((t,s)=>{const{__scopeSelect:n,className:r,style:i,children:l,placeholder:a="",...o}=t,c=Ne(Gs,n),{onValueNodeHasChildrenChange:x}=c,d=l!==void 0,f=Y(s,c.onValueNodeChange);return oe(()=>{x(d)},[x,d]),e.jsx(U.span,{...o,ref:f,style:{pointerEvents:"none"},children:hn(c.value)?e.jsx(e.Fragment,{children:a}):l})});Xs.displayName=Gs;var ra="SelectIcon",qs=h.forwardRef((t,s)=>{const{__scopeSelect:n,children:r,...i}=t;return e.jsx(U.span,{"aria-hidden":!0,...i,ref:s,children:r||"â–¼"})});qs.displayName=ra;var ia="SelectPortal",Ys=t=>e.jsx(yn,{asChild:!0,...t});Ys.displayName=ia;var Re="SelectContent",Zs=h.forwardRef((t,s)=>{const n=Ne(Re,t.__scopeSelect),[r,i]=h.useState();if(oe(()=>{i(new DocumentFragment)},[]),!n.open){const l=r;return l?zt.createPortal(e.jsx(Qs,{scope:t.__scopeSelect,children:e.jsx(ut.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),l):null}return e.jsx(Js,{...t,ref:s})});Zs.displayName=Re;var ae=10,[Qs,we]=ze(Re),aa="SelectContentImpl",la=At("SelectContent.RemoveScroll"),Js=h.forwardRef((t,s)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:l,onPointerDownOutside:a,side:o,sideOffset:c,align:x,alignOffset:d,arrowPadding:f,collisionBoundary:N,collisionPadding:u,sticky:v,hideWhenDetached:p,avoidCollisions:b,...w}=t,j=Ne(Re,n),[C,g]=h.useState(null),[y,_]=h.useState(null),k=Y(s,I=>g(I)),[T,L]=h.useState(null),[D,A]=h.useState(null),m=ht(n),[S,P]=h.useState(!1),O=h.useRef(!1);h.useEffect(()=>{if(C)return vn(C)},[C]),bn();const M=h.useCallback(I=>{const[B,...G]=m().map(H=>H.ref.current),[F]=G.slice(-1),V=document.activeElement;for(const H of I)if(H===V||(H?.scrollIntoView({block:"nearest"}),H===B&&y&&(y.scrollTop=0),H===F&&y&&(y.scrollTop=y.scrollHeight),H?.focus(),document.activeElement!==V))return},[m,y]),$=h.useCallback(()=>M([T,C]),[M,T,C]);h.useEffect(()=>{S&&$()},[S,$]);const{onOpenChange:E,triggerPointerDownPosRef:z}=j;h.useEffect(()=>{if(C){let I={x:0,y:0};const B=F=>{I={x:Math.abs(Math.round(F.pageX)-(z.current?.x??0)),y:Math.abs(Math.round(F.pageY)-(z.current?.y??0))}},G=F=>{I.x<=10&&I.y<=10?F.preventDefault():C.contains(F.target)||E(!1),document.removeEventListener("pointermove",B),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",B),document.addEventListener("pointerup",G,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",B),document.removeEventListener("pointerup",G,{capture:!0})}}},[C,E,z]),h.useEffect(()=>{const I=()=>E(!1);return window.addEventListener("blur",I),window.addEventListener("resize",I),()=>{window.removeEventListener("blur",I),window.removeEventListener("resize",I)}},[E]);const[q,Ce]=pn(I=>{const B=m().filter(V=>!V.disabled),G=B.find(V=>V.ref.current===document.activeElement),F=fn(B,I,G);F&&setTimeout(()=>F.ref.current.focus())}),Fe=h.useCallback((I,B,G)=>{const F=!O.current&&!G;(j.value!==void 0&&j.value===B||F)&&(L(I),F&&(O.current=!0))},[j.value]),Ve=h.useCallback(()=>C?.focus(),[C]),ge=h.useCallback((I,B,G)=>{const F=!O.current&&!G;(j.value!==void 0&&j.value===B||F)&&A(I)},[j.value]),Oe=r==="popper"?Et:en,Se=Oe===Et?{side:o,sideOffset:c,align:x,alignOffset:d,arrowPadding:f,collisionBoundary:N,collisionPadding:u,sticky:v,hideWhenDetached:p,avoidCollisions:b}:{};return e.jsx(Qs,{scope:n,content:C,viewport:y,onViewportChange:_,itemRefCallback:Fe,selectedItem:T,onItemLeave:Ve,itemTextRefCallback:ge,focusSelectedItem:$,selectedItemText:D,position:r,isPositioned:S,searchRef:q,children:e.jsx(jn,{as:la,allowPinchZoom:!0,children:e.jsx(Nn,{asChild:!0,trapped:j.open,onMountAutoFocus:I=>{I.preventDefault()},onUnmountAutoFocus:K(i,I=>{j.trigger?.focus({preventScroll:!0}),I.preventDefault()}),children:e.jsx(wn,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:a,onFocusOutside:I=>I.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:e.jsx(Oe,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:I=>I.preventDefault(),...w,...Se,onPlaced:()=>P(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:K(w.onKeyDown,I=>{const B=I.ctrlKey||I.altKey||I.metaKey;if(I.key==="Tab"&&I.preventDefault(),!B&&I.key.length===1&&Ce(I.key),["ArrowUp","ArrowDown","Home","End"].includes(I.key)){let F=m().filter(V=>!V.disabled).map(V=>V.ref.current);if(["ArrowUp","End"].includes(I.key)&&(F=F.slice().reverse()),["ArrowUp","ArrowDown"].includes(I.key)){const V=I.target,H=F.indexOf(V);F=F.slice(H+1)}setTimeout(()=>M(F)),I.preventDefault()}})})})})})})});Js.displayName=aa;var oa="SelectItemAlignedPosition",en=h.forwardRef((t,s)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,l=Ne(Re,n),a=we(Re,n),[o,c]=h.useState(null),[x,d]=h.useState(null),f=Y(s,k=>d(k)),N=ht(n),u=h.useRef(!1),v=h.useRef(!0),{viewport:p,selectedItem:b,selectedItemText:w,focusSelectedItem:j}=a,C=h.useCallback(()=>{if(l.trigger&&l.valueNode&&o&&x&&p&&b&&w){const k=l.trigger.getBoundingClientRect(),T=x.getBoundingClientRect(),L=l.valueNode.getBoundingClientRect(),D=w.getBoundingClientRect();if(l.dir!=="rtl"){const V=D.left-T.left,H=L.left-V,ie=k.left-H,ke=k.width+ie,ft=Math.max(ke,T.width),gt=window.innerWidth-ae,yt=ss(H,[ae,Math.max(ae,gt-ft)]);o.style.minWidth=ke+"px",o.style.left=yt+"px"}else{const V=T.right-D.right,H=window.innerWidth-L.right-V,ie=window.innerWidth-k.right-H,ke=k.width+ie,ft=Math.max(ke,T.width),gt=window.innerWidth-ae,yt=ss(H,[ae,Math.max(ae,gt-ft)]);o.style.minWidth=ke+"px",o.style.right=yt+"px"}const A=N(),m=window.innerHeight-ae*2,S=p.scrollHeight,P=window.getComputedStyle(x),O=parseInt(P.borderTopWidth,10),M=parseInt(P.paddingTop,10),$=parseInt(P.borderBottomWidth,10),E=parseInt(P.paddingBottom,10),z=O+M+S+E+$,q=Math.min(b.offsetHeight*5,z),Ce=window.getComputedStyle(p),Fe=parseInt(Ce.paddingTop,10),Ve=parseInt(Ce.paddingBottom,10),ge=k.top+k.height/2-ae,Oe=m-ge,Se=b.offsetHeight/2,I=b.offsetTop+Se,B=O+M+I,G=z-B;if(B<=ge){const V=A.length>0&&b===A[A.length-1].ref.current;o.style.bottom="0px";const H=x.clientHeight-p.offsetTop-p.offsetHeight,ie=Math.max(Oe,Se+(V?Ve:0)+H+$),ke=B+ie;o.style.height=ke+"px"}else{const V=A.length>0&&b===A[0].ref.current;o.style.top="0px";const ie=Math.max(ge,O+p.offsetTop+(V?Fe:0)+Se)+G;o.style.height=ie+"px",p.scrollTop=B-ge+p.offsetTop}o.style.margin=`${ae}px 0`,o.style.minHeight=q+"px",o.style.maxHeight=m+"px",r?.(),requestAnimationFrame(()=>u.current=!0)}},[N,l.trigger,l.valueNode,o,x,p,b,w,l.dir,r]);oe(()=>C(),[C]);const[g,y]=h.useState();oe(()=>{x&&y(window.getComputedStyle(x).zIndex)},[x]);const _=h.useCallback(k=>{k&&v.current===!0&&(C(),j?.(),v.current=!1)},[C,j]);return e.jsx(da,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:u,onScrollButtonChange:_,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:g},children:e.jsx(U.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});en.displayName=oa;var ca="SelectPopperPosition",Et=h.forwardRef((t,s)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=ae,...l}=t,a=pt(n);return e.jsx(Gi,{...a,...l,ref:s,align:r,collisionPadding:i,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Et.displayName=ca;var[da,qt]=ze(Re,{}),Rt="SelectViewport",tn=h.forwardRef((t,s)=>{const{__scopeSelect:n,nonce:r,...i}=t,l=we(Rt,n),a=qt(Rt,n),o=Y(s,l.onViewportChange),c=h.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(ut.Slot,{scope:n,children:e.jsx(U.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:K(i.onScroll,x=>{const d=x.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:N}=a;if(N?.current&&f){const u=Math.abs(c.current-d.scrollTop);if(u>0){const v=window.innerHeight-ae*2,p=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),w=Math.max(p,b);if(w<v){const j=w+u,C=Math.min(v,j),g=j-C;f.style.height=C+"px",f.style.bottom==="0px"&&(d.scrollTop=g>0?g:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});tn.displayName=Rt;var sn="SelectGroup",[ma,xa]=ze(sn),ua=h.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,i=Ft();return e.jsx(ma,{scope:n,id:i,children:e.jsx(U.div,{role:"group","aria-labelledby":i,...r,ref:s})})});ua.displayName=sn;var nn="SelectLabel",ha=h.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,i=xa(nn,n);return e.jsx(U.div,{id:i.id,...r,ref:s})});ha.displayName=nn;var lt="SelectItem",[pa,rn]=ze(lt),an=h.forwardRef((t,s)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:l,...a}=t,o=Ne(lt,n),c=we(lt,n),x=o.value===r,[d,f]=h.useState(l??""),[N,u]=h.useState(!1),v=Y(s,j=>c.itemRefCallback?.(j,r,i)),p=Ft(),b=h.useRef("touch"),w=()=>{i||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(pa,{scope:n,value:r,disabled:i,textId:p,isSelected:x,onItemTextChange:h.useCallback(j=>{f(C=>C||(j?.textContent??"").trim())},[]),children:e.jsx(ut.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:e.jsx(U.div,{role:"option","aria-labelledby":p,"data-highlighted":N?"":void 0,"aria-selected":x&&N,"data-state":x?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:v,onFocus:K(a.onFocus,()=>u(!0)),onBlur:K(a.onBlur,()=>u(!1)),onClick:K(a.onClick,()=>{b.current!=="mouse"&&w()}),onPointerUp:K(a.onPointerUp,()=>{b.current==="mouse"&&w()}),onPointerDown:K(a.onPointerDown,j=>{b.current=j.pointerType}),onPointerMove:K(a.onPointerMove,j=>{b.current=j.pointerType,i?c.onItemLeave?.():b.current==="mouse"&&j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:K(a.onPointerLeave,j=>{j.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:K(a.onKeyDown,j=>{c.searchRef?.current!==""&&j.key===" "||(Ji.includes(j.key)&&w(),j.key===" "&&j.preventDefault())})})})})});an.displayName=lt;var He="SelectItemText",ln=h.forwardRef((t,s)=>{const{__scopeSelect:n,className:r,style:i,...l}=t,a=Ne(He,n),o=we(He,n),c=rn(He,n),x=na(He,n),[d,f]=h.useState(null),N=Y(s,w=>f(w),c.onItemTextChange,w=>o.itemTextRefCallback?.(w,c.value,c.disabled)),u=d?.textContent,v=h.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:u},c.value),[c.disabled,c.value,u]),{onNativeOptionAdd:p,onNativeOptionRemove:b}=x;return oe(()=>(p(v),()=>b(v)),[p,b,v]),e.jsxs(e.Fragment,{children:[e.jsx(U.span,{id:c.textId,...l,ref:N}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?zt.createPortal(l.children,a.valueNode):null]})});ln.displayName=He;var on="SelectItemIndicator",cn=h.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t;return rn(on,n).isSelected?e.jsx(U.span,{"aria-hidden":!0,...r,ref:s}):null});cn.displayName=on;var Ot="SelectScrollUpButton",dn=h.forwardRef((t,s)=>{const n=we(Ot,t.__scopeSelect),r=qt(Ot,t.__scopeSelect),[i,l]=h.useState(!1),a=Y(s,r.onScrollButtonChange);return oe(()=>{if(n.viewport&&n.isPositioned){let o=function(){const x=c.scrollTop>0;l(x)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?e.jsx(xn,{...t,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});dn.displayName=Ot;var Mt="SelectScrollDownButton",mn=h.forwardRef((t,s)=>{const n=we(Mt,t.__scopeSelect),r=qt(Mt,t.__scopeSelect),[i,l]=h.useState(!1),a=Y(s,r.onScrollButtonChange);return oe(()=>{if(n.viewport&&n.isPositioned){let o=function(){const x=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<x;l(d)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?e.jsx(xn,{...t,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});mn.displayName=Mt;var xn=h.forwardRef((t,s)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,l=we("SelectScrollButton",n),a=h.useRef(null),o=ht(n),c=h.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return h.useEffect(()=>()=>c(),[c]),oe(()=>{o().find(d=>d.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[o]),e.jsx(U.div,{"aria-hidden":!0,...i,ref:s,style:{flexShrink:0,...i.style},onPointerDown:K(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:K(i.onPointerMove,()=>{l.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:K(i.onPointerLeave,()=>{c()})})}),fa="SelectSeparator",ga=h.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t;return e.jsx(U.div,{"aria-hidden":!0,...r,ref:s})});ga.displayName=fa;var Lt="SelectArrow",ya=h.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,i=pt(n),l=Ne(Lt,n),a=we(Lt,n);return l.open&&a.position==="popper"?e.jsx(Xi,{...i,...r,ref:s}):null});ya.displayName=Lt;var va="SelectBubbleInput",un=h.forwardRef(({__scopeSelect:t,value:s,...n},r)=>{const i=h.useRef(null),l=Y(r,i),a=qi(s);return h.useEffect(()=>{const o=i.current;if(!o)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==s&&d){const f=new Event("change",{bubbles:!0});d.call(o,s),o.dispatchEvent(f)}},[a,s]),e.jsx(U.select,{...n,style:{...Hs,...n.style},ref:l,defaultValue:s})});un.displayName=va;function hn(t){return t===""||t===void 0}function pn(t){const s=gs(t),n=h.useRef(""),r=h.useRef(0),i=h.useCallback(a=>{const o=n.current+a;s(o),(function c(x){n.current=x,window.clearTimeout(r.current),x!==""&&(r.current=window.setTimeout(()=>c(""),1e3))})(o)},[s]),l=h.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return h.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,l]}function fn(t,s,n){const i=s.length>1&&Array.from(s).every(x=>x===s[0])?s[0]:s,l=n?t.indexOf(n):-1;let a=ba(t,Math.max(l,0));i.length===1&&(a=a.filter(x=>x!==n));const c=a.find(x=>x.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function ba(t,s){return t.map((n,r)=>t[(s+r)%t.length])}var ja=Ws,Na=Us,wa=Xs,Ca=qs,Sa=Ys,ka=Zs,_a=tn,Aa=an,Pa=ln,Ta=cn,Ia=dn,Ea=mn;function ee({...t}){return e.jsx(ja,{"data-slot":"select",...t})}function te({...t}){return e.jsx(wa,{"data-slot":"select-value",...t})}function se({className:t,size:s="default",children:n,...r}){return e.jsxs(Na,{"data-slot":"select-trigger","data-size":s,className:le("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[n,e.jsx(Ca,{asChild:!0,children:e.jsx(Dt,{className:"size-4 opacity-50"})})]})}function ne({className:t,children:s,position:n="popper",...r}){return e.jsx(Sa,{children:e.jsxs(ka,{"data-slot":"select-content",className:le("bg-white text-gray-950 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[e.jsx(Ra,{}),e.jsx(_a,{className:le("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(Oa,{})]})})}function R({className:t,children:s,...n}){return e.jsxs(Aa,{"data-slot":"select-item",className:le("focus:bg-gray-100 hover:bg-gray-100 text-gray-950 relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(Ta,{children:e.jsx(Un,{className:"size-4"})})}),e.jsx(Pa,{children:s})]})}function Ra({className:t,...s}){return e.jsx(Ia,{"data-slot":"select-scroll-up-button",className:le("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(bs,{className:"size-4"})})}function Oa({className:t,...s}){return e.jsx(Ea,{"data-slot":"select-scroll-down-button",className:le("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Dt,{className:"size-4"})})}function Pe({className:t,...s}){return e.jsx("textarea",{"data-slot":"textarea",className:le("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}const hs={name:"",industry:"",organization_type:"",risk_tolerance:"",innovation_approach:"",region:"",decision_making_style:"",competitive_landscape:"",description:"",key_concerns:"",strategic_priorities:"",key_stakeholders:"",regulatory_environment:"",additional_context:""};function Ma({open:t,onOpenChange:s,profiles:n,onSave:r}){const[i,l]=h.useState(null),[a,o]=h.useState(hs),[c,x]=h.useState(!1),d=u=>{l(u);const v=n.find(p=>p.id===u);v&&o({name:v.name||"",industry:v.industry||"",organization_type:v.organization_type||"",risk_tolerance:v.risk_tolerance||"",innovation_approach:v.innovation_approach||"",region:v.region||"",decision_making_style:v.decision_making_style||"",competitive_landscape:v.competitive_landscape||"",description:v.description||"",key_concerns:v.key_concerns||"",strategic_priorities:v.strategic_priorities||"",key_stakeholders:v.key_stakeholders||"",regulatory_environment:v.regulatory_environment||"",additional_context:v.additional_context||""})},f=()=>{l(null),o(hs)},N=async()=>{x(!0);try{await r({...a,id:i||void 0}),s(!1)}catch(u){console.error("Error saving profile:",u)}finally{x(!1)}};return e.jsx(We,{open:t,onOpenChange:s,children:e.jsx(Ke,{className:"max-w-6xl max-h-[90vh] overflow-hidden p-0",children:e.jsxs("div",{className:"flex h-[90vh]",children:[e.jsxs("div",{className:"w-64 bg-gray-50 border-r border-gray-200 flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Profile"}),e.jsx(W,{size:"sm",className:"h-7 bg-pink-500 hover:bg-pink-600 text-white text-xs",onClick:f,children:"New +"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:n.map(u=>e.jsx("button",{onClick:()=>d(u.id),className:`w-full text-left px-4 py-3 border-b border-gray-200 hover:bg-white transition-colors ${i===u.id?"bg-white":""}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-semibold text-sm text-gray-950 mb-0.5",children:u.name}),e.jsxs("div",{className:"text-xs text-gray-600 mb-1",children:[u.industry," â€¢ ",u.organization_type]}),e.jsx("div",{className:"text-xs text-gray-700 mb-1",children:u.tags?.join(" â€¢ ")}),e.jsx("span",{className:"inline-block text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:"Default"})]}),e.jsx(or,{className:"w-3.5 h-3.5 text-pink-500 shrink-0"})]})},u.id))})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(Ue,{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs(Ge,{className:"text-xl font-bold",children:[i?"Edit Profile: ":"New Profile: ",a.name||"Untitled"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:e.jsxs("div",{className:"space-y-4 max-w-4xl",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-semibold mb-1.5 block",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(ts,{value:a.name,onChange:u=>o({...a,name:u.target.value}),placeholder:"Cybersecurity Organization",className:"h-9"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-1.5 block",children:"Key Concerns"}),e.jsx(Pe,{value:a.key_concerns,onChange:u=>o({...a,key_concerns:u.target.value}),placeholder:"Advanced persistent threats, Zero-day vulnerabilities...",className:"min-h-[60px] text-sm resize-none"}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"â“˜ Separate multiple priorities with commas"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-1.5 block",children:"Industry"}),e.jsxs(ee,{value:a.industry,onValueChange:u=>o({...a,industry:u}),children:[e.jsx(se,{className:"h-9",children:e.jsx(te,{placeholder:"Cybersecurity"})}),e.jsxs(ne,{children:[e.jsx(R,{value:"Cybersecurity",children:"Cybersecurity"}),e.jsx(R,{value:"Financial Services",children:"Financial Services"}),e.jsx(R,{value:"Healthcare",children:"Healthcare"}),e.jsx(R,{value:"Technology",children:"Technology"}),e.jsx(R,{value:"Manufacturing",children:"Manufacturing"}),e.jsx(R,{value:"Retail",children:"Retail"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-1.5 block",children:"Organization Type"}),e.jsx(ts,{value:a.organization_type,onChange:u=>o({...a,organization_type:u.target.value}),placeholder:"security_team",className:"h-9"}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"â“˜ Separate multiple priorities with commas"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-1.5 block",children:"Risk Tolerance"}),e.jsxs(ee,{value:a.risk_tolerance,onValueChange:u=>o({...a,risk_tolerance:u}),children:[e.jsx(se,{className:"h-9",children:e.jsx(te,{placeholder:"Conservative (Low Risk)"})}),e.jsxs(ne,{children:[e.jsx(R,{value:"Conservative",children:"Conservative (Low Risk)"}),e.jsx(R,{value:"Moderate",children:"Moderate"}),e.jsx(R,{value:"Aggressive",children:"Aggressive (High Risk)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-1.5 block",children:"Strategic Priorities"}),e.jsx(Pe,{value:a.strategic_priorities,onChange:u=>o({...a,strategic_priorities:u.target.value}),placeholder:"Threat prevention, Incident response...",className:"min-h-[60px] text-sm resize-none"}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"â“˜ Separate multiple priorities with commas"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-1.5 block",children:"Innovation Approach"}),e.jsxs(ee,{value:a.innovation_approach,onValueChange:u=>o({...a,innovation_approach:u}),children:[e.jsx(se,{className:"h-9",children:e.jsx(te,{placeholder:"Conservative"})}),e.jsxs(ne,{children:[e.jsx(R,{value:"Conservative",children:"Conservative"}),e.jsx(R,{value:"Balanced",children:"Balanced"}),e.jsx(R,{value:"Aggressive",children:"Aggressive"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-1.5 block",children:"Key Stakeholders"}),e.jsx(Pe,{value:a.key_stakeholders,onChange:u=>o({...a,key_stakeholders:u.target.value}),placeholder:"C-suite executives, IT teams...",className:"min-h-[60px] text-sm resize-none"}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"â“˜ Separate multiple priorities with commas"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-1.5 block",children:"Region"}),e.jsxs(ee,{value:a.region,onValueChange:u=>o({...a,region:u}),children:[e.jsx(se,{className:"h-9",children:e.jsx(te,{placeholder:"Global"})}),e.jsxs(ne,{children:[e.jsx(R,{value:"Global",children:"Global"}),e.jsx(R,{value:"North America",children:"North America"}),e.jsx(R,{value:"Europe",children:"Europe"}),e.jsx(R,{value:"Asia Pacific",children:"Asia Pacific"}),e.jsx(R,{value:"Latin America",children:"Latin America"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-1.5 block",children:"Regulatory Environment"}),e.jsx(Pe,{value:a.regulatory_environment,onChange:u=>o({...a,regulatory_environment:u.target.value}),placeholder:"GDPR, SOC 2, ISO 27001...",className:"min-h-[60px] text-sm resize-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-1.5 block",children:"Decision Making Style"}),e.jsxs(ee,{value:a.decision_making_style,onValueChange:u=>o({...a,decision_making_style:u}),children:[e.jsx(se,{className:"h-9",children:e.jsx(te,{placeholder:"Data-Driven"})}),e.jsxs(ne,{children:[e.jsx(R,{value:"Data-Driven",children:"Data-Driven"}),e.jsx(R,{value:"Intuitive",children:"Intuitive"}),e.jsx(R,{value:"Collaborative",children:"Collaborative"}),e.jsx(R,{value:"Hierarchical",children:"Hierarchical"})]})]})]}),e.jsx("div",{})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-1.5 block",children:"Competitive Landscape"}),e.jsx(Pe,{value:a.competitive_landscape,onChange:u=>o({...a,competitive_landscape:u.target.value}),placeholder:"Nation-state actors, Cybercriminal groups...",className:"min-h-[60px] text-sm resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-1.5 block",children:"Description"}),e.jsx(Pe,{value:a.description,onChange:u=>o({...a,description:u.target.value}),placeholder:"Security and risk management team focused on protecting digital assets...",className:"min-h-[60px] text-sm resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-1.5 block",children:"Additional Context"}),e.jsx(Pe,{value:a.additional_context,onChange:u=>o({...a,additional_context:u.target.value}),placeholder:"Zero-trust security approach with emphasis on proactive threat detection...",className:"min-h-[80px] text-sm resize-none"})]})]})}),e.jsxs("div",{className:"border-t border-gray-200 px-6 py-4 flex justify-end gap-3",children:[e.jsx(W,{variant:"outline",onClick:()=>s(!1),className:"px-6 text-pink-500 border-pink-200 hover:bg-pink-50",children:"Clear"}),e.jsx(W,{onClick:N,disabled:c||!a.name,className:"px-6 bg-pink-500 hover:bg-pink-600",children:c?"Saving...":"Save"})]})]})]})})})}function La({currentStep:t,totalSteps:s,stepLabels:n=[]}){return e.jsx("div",{className:"flex items-center justify-between mb-8",children:Array.from({length:s},(r,i)=>{const l=i+1,a=l===t,o=l<t,c=l===s;return e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-colors ${a?"bg-pink-500 text-white":o?"bg-green-500 text-white":"bg-gray-200 text-gray-700"}`,children:o?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):l}),n[i]&&e.jsx("span",{className:`mt-2 text-xs ${a?"font-semibold text-gray-950":"text-gray-600"}`,children:n[i]})]}),!c&&e.jsx("div",{className:`flex-1 h-0.5 mx-2 transition-colors ${o?"bg-green-500":"bg-gray-200"}`})]},l)})})}const Be={openai:{name:"OpenAI",link:"https://platform.openai.com/api-keys",help:"Supports GPT-4, GPT-4o, and more"},anthropic:{name:"Anthropic",link:"https://console.anthropic.com/settings/keys",help:"Supports Claude 3.5, Claude 4, and more"},gemini:{name:"Google Gemini",link:"https://aistudio.google.com/app/apikey",help:"Supports Gemini Pro, Gemini 2.0 Flash, and more"},newsapi:{name:"NewsAPI",link:"https://newsapi.org/register"},thenewsapi:{name:"TheNewsAPI",link:"https://www.thenewsapi.com/register"},newsdata:{name:"NewsData.io",link:"https://newsdata.io/register"}};function Da({onNext:t}){const[s,n]=h.useState({provider:"",key:"",validated:!1,testing:!1,error:null}),[r,i]=h.useState({provider:"",key:"",validated:!1,testing:!1,error:null}),[l,a]=h.useState({provider:"firecrawl",key:"",validated:!1,testing:!1,error:null}),[o,c]=h.useState(!1),[x,d]=h.useState(!1),[f,N]=h.useState(!1),u=async p=>{const b=p==="llm"?s:p==="news"?r:l,w=p==="llm"?n:p==="news"?i:a;if(!b.key){w({...b,error:"Please enter an API key"});return}if(p!=="firecrawl"&&!b.provider){w({...b,error:"Please select a provider"});return}w({...b,testing:!0,error:null});try{const j=await Mn({provider:b.provider,api_key:b.key});j.configured||j.status==="valid"?w({...b,validated:!0,testing:!1,error:null}):w({...b,validated:!1,testing:!1,error:"Validation failed"})}catch(j){w({...b,validated:!1,testing:!1,error:j instanceof Error?j.message:"Failed to test key"})}},v=s.validated&&r.validated&&l.validated;return e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold mb-2",children:"Step 1: Configure API Keys"}),e.jsx("p",{className:"text-gray-700 mb-6",children:"Set up your API keys for AI and news services"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"AI Provider"}),e.jsxs(ee,{value:s.provider,onValueChange:p=>n({...s,provider:p,validated:!1,error:null}),children:[e.jsx(se,{className:"w-full",children:e.jsx(te,{placeholder:"Select an AI provider"})}),e.jsxs(ne,{children:[e.jsx(R,{value:"openai",children:"OpenAI (GPT-4, GPT-4o, etc.)"}),e.jsx(R,{value:"anthropic",children:"Anthropic (Claude)"}),e.jsx(R,{value:"gemini",children:"Google Gemini"})]})]}),e.jsx("small",{className:"text-gray-600 text-xs",children:"Choose your AI provider - one key works for all models from that provider."})]}),s.provider&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2",children:[Be[s.provider]?.name," API Key"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:o?"text":"password",value:s.key,onChange:p=>n({...s,key:p.target.value,validated:!1,error:null}),placeholder:"Enter API key",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500"}),e.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-600 hover:text-gray-800",children:o?e.jsx(wt,{className:"w-4 h-4"}):e.jsx(Ct,{className:"w-4 h-4"})})]}),e.jsx(W,{variant:"outline",onClick:()=>u("llm"),disabled:s.testing,children:s.testing?e.jsx(ve,{className:"w-4 h-4 animate-spin"}):"Test"})]}),s.validated&&e.jsxs("div",{className:"mt-2 flex items-center gap-1 text-green-600 text-sm",children:[e.jsx(jt,{className:"w-4 h-4"}),e.jsx("span",{children:"Key configured âœ“"})]}),s.error&&e.jsxs("div",{className:"mt-2 flex items-center gap-1 text-red-600 text-sm",children:[e.jsx(Nt,{className:"w-4 h-4"}),e.jsx("span",{children:s.error})]}),e.jsxs("small",{className:"text-gray-600 text-xs",children:[Be[s.provider]?.help,"."," ",e.jsx("a",{href:Be[s.provider]?.link,target:"_blank",rel:"noopener noreferrer",className:"text-pink-600 hover:text-pink-700",children:"Get API key â†—"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"News Provider"}),e.jsxs(ee,{value:r.provider,onValueChange:p=>i({...r,provider:p,validated:!1,error:null}),children:[e.jsx(se,{className:"w-full",children:e.jsx(te,{placeholder:"Select a news provider"})}),e.jsxs(ne,{children:[e.jsx(R,{value:"newsapi",children:"NewsAPI"}),e.jsx(R,{value:"thenewsapi",children:"TheNewsAPI"}),e.jsx(R,{value:"newsdata",children:"NewsData.io"})]})]}),e.jsx("small",{className:"text-gray-600 text-xs",children:"Choose your news data provider."})]}),r.provider&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2",children:[Be[r.provider]?.name," API Key"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:x?"text":"password",value:r.key,onChange:p=>i({...r,key:p.target.value,validated:!1,error:null}),placeholder:"Enter API key",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500"}),e.jsx("button",{type:"button",onClick:()=>d(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-600 hover:text-gray-800",children:x?e.jsx(wt,{className:"w-4 h-4"}):e.jsx(Ct,{className:"w-4 h-4"})})]}),e.jsx(W,{variant:"outline",onClick:()=>u("news"),disabled:r.testing,children:r.testing?e.jsx(ve,{className:"w-4 h-4 animate-spin"}):"Test"})]}),r.validated&&e.jsxs("div",{className:"mt-2 flex items-center gap-1 text-green-600 text-sm",children:[e.jsx(jt,{className:"w-4 h-4"}),e.jsx("span",{children:"Key configured âœ“"})]}),r.error&&e.jsxs("div",{className:"mt-2 flex items-center gap-1 text-red-600 text-sm",children:[e.jsx(Nt,{className:"w-4 h-4"}),e.jsx("span",{children:r.error})]}),e.jsxs("small",{className:"text-gray-600 text-xs",children:["Required for fetching news articles."," ",e.jsx("a",{href:Be[r.provider]?.link,target:"_blank",rel:"noopener noreferrer",className:"text-pink-600 hover:text-pink-700",children:"Register here â†—"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Firecrawl Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:f?"text":"password",value:l.key,onChange:p=>a({...l,key:p.target.value,validated:!1,error:null}),placeholder:"Enter API key",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500"}),e.jsx("button",{type:"button",onClick:()=>N(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-600 hover:text-gray-800",children:f?e.jsx(wt,{className:"w-4 h-4"}):e.jsx(Ct,{className:"w-4 h-4"})})]}),e.jsx(W,{variant:"outline",onClick:()=>u("firecrawl"),disabled:l.testing,children:l.testing?e.jsx(ve,{className:"w-4 h-4 animate-spin"}):"Test"})]}),l.validated&&e.jsxs("div",{className:"mt-2 flex items-center gap-1 text-green-600 text-sm",children:[e.jsx(jt,{className:"w-4 h-4"}),e.jsx("span",{children:"Key configured âœ“"})]}),l.error&&e.jsxs("div",{className:"mt-2 flex items-center gap-1 text-red-600 text-sm",children:[e.jsx(Nt,{className:"w-4 h-4"}),e.jsx("span",{children:l.error})]}),e.jsxs("small",{className:"text-gray-600 text-xs",children:["Required for web scraping and data collection."," ",e.jsx("a",{href:"https://www.firecrawl.dev/pricing",target:"_blank",rel:"noopener noreferrer",className:"text-pink-600 hover:text-pink-700",children:"Free plan â†—"})]})]}),e.jsx("div",{className:"flex justify-end mt-8",children:e.jsx(W,{onClick:t,disabled:!v,className:"bg-pink-500 hover:bg-pink-600",children:"Next â†’"})})]})}function Te({value:t,onChange:s,placeholder:n="Type and press Enter to add",suggestions:r=[],id:i}){const[l,a]=h.useState(""),o=d=>{d.key==="Enter"&&l.trim()?(d.preventDefault(),t.includes(l.trim())||s([...t,l.trim()]),a("")):d.key==="Backspace"&&!l&&t.length>0&&s(t.slice(0,-1))},c=d=>{s(t.filter(f=>f!==d))},x=d=>{t.includes(d)||s([...t,d])};return e.jsxs("div",{children:[e.jsxs("div",{className:"border border-pink-200 rounded-lg p-3 min-h-[100px] flex flex-wrap gap-2 items-start bg-white",children:[t.map((d,f)=>e.jsxs("span",{className:"inline-flex items-center bg-pink-100 text-pink-700 px-3 py-1 rounded-full text-sm border border-pink-200 shadow-sm",children:[d,e.jsx("button",{type:"button",onClick:()=>c(d),className:"ml-2 opacity-60 hover:opacity-100 transition-opacity","aria-label":`Remove ${d}`,children:e.jsx(Cn,{className:"w-3 h-3"})})]},f)),e.jsx("input",{type:"text",id:i,value:l,onChange:d=>a(d.target.value),onKeyDown:o,placeholder:t.length===0?n:"",className:"flex-1 min-w-[150px] border-none outline-none p-1 text-sm"})]}),r.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:r.map((d,f)=>e.jsxs("button",{type:"button",onClick:()=>x(d),disabled:t.includes(d),className:"px-3 py-1 text-sm bg-pink-50 text-pink-600 border border-pink-200 rounded-full hover:bg-pink-500 hover:text-white transition-colors disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-pink-50 disabled:hover:text-pink-600 relative group",children:[d,!t.includes(d)&&e.jsx("span",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"Click to add"})]},f))})]})}const ps={signals:["AI is hype","AI is evolving gradually","AI is accelerating","AI reaches plateau","AI breakthrough imminent"],categories:["AI in Finance","AI Ethics","AI Regulation","Cloud Computing","Edge AI"]},fs={sentiments:["Positive","Negative","Neutral"],timeToImpact:["Immediate (0-6 months)","Short-term (6-18 months)","Mid-term (18-60 months)","Long-term (60+ months)"]};function $a({onNext:t,onBack:s}){const[n,r]=h.useState(""),[i,l]=h.useState(""),[a,o]=h.useState([]),[c,x]=h.useState([]),[d,f]=h.useState(fs.sentiments),[N,u]=h.useState(fs.timeToImpact),[v,p]=h.useState(!1),[b,w]=h.useState(!1),[j,C]=h.useState(null),[g,y]=h.useState(null),_=async()=>{if(!n.trim()){alert("Please enter a topic name first");return}w(!0);try{const T=await vs({topic_name:n,topic_description:i||void 0});if(T){const L={futureSignals:T.future_signals||[],categories:T.categories||[],sentiments:T.sentiments||[],timeToImpact:T.time_to_impact||[],keywords:T.keywords||[]};C(L),p(!0),T.explanation&&l(T.explanation),L.futureSignals?.length>0&&o(L.futureSignals),L.categories?.length>0&&x(L.categories),T.keywords&&y(T.keywords)}}catch(T){console.error("Error getting suggestions:",T),alert("Failed to get AI suggestions. Please try again.")}finally{w(!1)}},k=()=>{if(!n.trim()){alert("Please enter a topic name");return}if(a.length===0||c.length===0||d.length===0||N.length===0){alert("Please fill in all required fields or use AI suggestions");return}t({name:n,description:i,futureSignals:a,categories:c,sentiments:d,timeToImpact:N},g)};return e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold mb-2",children:"Step 2: Set Up Your First Topic"}),e.jsx("p",{className:"text-gray-700 mb-6",children:"Create a topic to start monitoring"}),e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 mb-6 text-sm text-gray-800",children:[e.jsxs("p",{children:["At the core of ",e.jsx("strong",{children:"AuNoo AI"})," are ",e.jsx("strong",{children:"topics"}),"â€”flexible constructs that can represent markets, knowledge fields, organizations, or even specific strategic questions. For instance:"]}),e.jsxs("ul",{className:"mt-2 ml-4 list-disc space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Markets"}),": Cloud Service Providers, EV Battery Suppliers, or Threat Intelligence Providers."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Knowledge Fields"}),": Neurology, AI, or Archeology."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Organizations or People"}),": AI researchers, competitors, or even a favorite sports team."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Scenarios"}),': Questions like "Is AI hype?" or "How strong is the Cloud Repatriation movement?"']})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Topic Name"}),e.jsx("input",{type:"text",value:n,onChange:T=>r(T.target.value),placeholder:"Enter a descriptive name for your topic",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500"}),e.jsx("small",{className:"text-gray-600 text-xs",children:"Enter a descriptive name for your topic"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Topic Description (Optional)"}),e.jsx("textarea",{value:i,onChange:T=>l(T.target.value),rows:3,placeholder:"Provide additional details about this topic to improve attribute suggestions",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500"}),e.jsx("small",{className:"text-gray-600 text-xs",children:"A brief description helps the AI provide better suggestions"})]}),e.jsx("div",{className:"mb-6",children:e.jsx(W,{variant:"outline",onClick:_,disabled:b||!n.trim(),className:"border-pink-500 text-pink-600 hover:bg-pink-50",children:b?e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating Suggestions..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"w-4 h-4 mr-2"}),"Suggest Details"]})})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Future Signals"}),e.jsxs("p",{className:"text-gray-700 text-sm mb-2",children:["Future Signals are scenarios that suggest potential directions for a topic. For instance, signals for an AI hype model could range from",e.jsx("span",{className:"text-blue-600",children:' "AI is hype"'})," and",e.jsx("span",{className:"text-blue-600",children:' "AI is evolving gradually"'}),", to",e.jsx("span",{className:"text-blue-600",children:' "AI is accelerating"'}),"."]}),e.jsx(Te,{value:a,onChange:o,suggestions:j?.futureSignals||ps.signals,id:"futureSignalsInput"}),e.jsx("small",{className:"text-gray-600 text-xs",children:"Add signals that indicate future developments"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Categories"}),e.jsxs("p",{className:"text-gray-700 text-sm mb-2",children:["Each topic is broken down into categories, making it easier to organize and analyze data. For example, a topic on AI might include subcategories like",e.jsx("span",{className:"text-blue-600",children:" AI in Finance"})," or",e.jsx("span",{className:"text-blue-600",children:" Cloud Quarterly Earnings"}),"."]}),e.jsx(Te,{value:c,onChange:x,suggestions:j?.categories||ps.categories,id:"categoriesInput"}),e.jsx("small",{className:"text-gray-600 text-xs",children:"Add categories that describe your topic"})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx(W,{variant:"outline",onClick:s,children:"â† Back"}),e.jsx(W,{onClick:k,className:"bg-pink-500 hover:bg-pink-600",children:"Next â†’"})]})]})}function za({topicData:t,suggestedKeywords:s,onBack:n,onComplete:r}){const[i,l]=h.useState([]),[a,o]=h.useState([]),[c,x]=h.useState([]),[d,f]=h.useState([]),[N,u]=h.useState([]),[v,p]=h.useState(!1),[b,w]=h.useState(!1);h.useEffect(()=>{s&&(console.log("Populating keywords from Step 2:",s),s.companies?.length>0&&l(s.companies.slice(0,3)),s.technologies?.length>0&&o(s.technologies.slice(0,3)),s.general?.length>0&&x(s.general.slice(0,3)),s.people?.length>0&&f(s.people.slice(0,2)),s.exclusions?.length>0&&u(s.exclusions.slice(0,2)))},[s]);const j=async()=>{w(!0);try{const g=`Suggest relevant keywords for the topic "${t.name}". Organize them into these categories: Companies & Organizations, Technologies, General Keywords, People, and Exclusion Keywords (misinformation, unrelated terms). Provide only the most relevant and high-quality keywords for each category. Use real company and technology names where possible. Exclusion keywords should help filter out noise or unrelated results. Topic description: ${t.description}`,y=await vs({topic_name:t.name,topic_description:t.description,keyword_prompt:g});y&&y.keywords&&(console.log("Regenerated keywords:",y.keywords),l(y.keywords.companies?.slice(0,3)||[]),o(y.keywords.technologies?.slice(0,3)||[]),x(y.keywords.general?.slice(0,3)||[]),f(y.keywords.people?.slice(0,2)||[]),u(y.keywords.exclusions?.slice(0,2)||[]))}catch(g){console.error("Error regenerating keywords:",g),alert("Failed to regenerate keywords. Please try again.")}finally{w(!1)}},C=async()=>{const g=[...i.map(y=>`company:${y}`),...a.map(y=>`tech:${y}`),...c,...d.map(y=>`person:${y}`),...N.map(y=>y.startsWith("-")||y.startsWith("NOT ")?y:`-${y}`)];if(g.length===0){alert("Please add at least one keyword");return}p(!0);try{const y=await Dn({name:t.name,description:t.description,futureSignals:t.futureSignals,categories:t.categories,sentiments:t.sentiments,timeToImpact:t.timeToImpact,keywords:g});y.status==="success"||y.success?(await $n(),r()):alert(y.message||"Failed to save topic")}catch(y){console.error("Error completing onboarding:",y),alert("Failed to complete onboarding. Please try again.")}finally{p(!1)}};return e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold mb-2",children:"Step 3: Set Up Keywords"}),e.jsx("p",{className:"text-gray-700 mb-6",children:"Add keywords to monitor for your topic"}),e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 mb-6 text-sm text-gray-800",children:[e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"Keywords"})," help AuNoo find relevant articles. You can organize keywords by category:"]}),e.jsxs("ul",{className:"ml-4 list-disc space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Companies"}),": Organizations to track"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Technologies"}),": Specific technologies or products"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"People"}),": Key individuals or thought leaders"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"General"}),": Other relevant terms"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Exclusions"}),": Terms to exclude from results (prefix with -)"]})]})]}),s&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-3 text-sm text-green-800",children:[e.jsx("span",{className:"font-semibold",children:"âœ“"})," Keywords from Step 2 have been applied"]}),e.jsx(W,{variant:"outline",onClick:j,disabled:b,className:"border-pink-500 text-pink-600 hover:bg-pink-50",children:b?e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"w-4 h-4 mr-2"}),"Get Different Suggestions"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Companies & Organizations"}),e.jsx(Te,{value:i,onChange:l,placeholder:"Add companies",id:"companiesInput"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Technologies"}),e.jsx(Te,{value:a,onChange:o,placeholder:"Add technologies",id:"technologiesInput"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"General Keywords"}),e.jsx(Te,{value:c,onChange:x,placeholder:"Add general keywords",id:"generalKeywordsInput"}),e.jsx("small",{className:"text-gray-600 text-xs",children:"Keywords that don't fit into specific categories above"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"People"}),e.jsx(Te,{value:d,onChange:f,placeholder:"Add people",id:"peopleInput"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Exclusion Keywords"}),e.jsx(Te,{value:N,onChange:u,placeholder:"Add exclusions (prefix with - or NOT)",id:"exclusionKeywordsInput"}),e.jsx("small",{className:"text-gray-600 text-xs",children:'Prefix with minus (-) or "NOT" to exclude terms from search results'})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsx("h5",{className:"font-semibold text-blue-900 mb-2",children:"Topic Summary"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",t.name]}),t.description&&e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",t.description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Categories:"})," ",t.categories.length]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Future Signals:"})," ",t.futureSignals.length]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Keywords:"})," ",i.length+a.length+c.length+d.length+N.length]})]})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx(W,{variant:"outline",onClick:n,disabled:v,children:"â† Back"}),e.jsx(W,{onClick:C,disabled:v,className:"bg-pink-500 hover:bg-pink-600",children:v?e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Complete Setup"})]})]})}function Fa({open:t,onOpenChange:s,onComplete:n}){const[r,i]=h.useState(1),[l,a]=h.useState(null),[o,c]=h.useState(null),[x,d]=h.useState(!0);h.useEffect(()=>{t&&f()},[t]);const f=async()=>{d(!0);try{const j=await Ln();(j.openai||j.anthropic||j.gemini)&&(j.newsapi||j.thenewsapi||j.newsdata)&&j.firecrawl?(console.log("All API keys configured, skipping Step 1"),i(2)):i(1)}catch(j){console.error("Error checking API keys:",j),i(1)}finally{d(!1)}},N=()=>{i(2)},u=(j,C)=>{a(j),c(C),i(3)},v=()=>{i(1)},p=()=>{i(2)},b=()=>{s(!1),i(1),a(null),d(!0),n&&n()},w=["API Keys","Topic Setup","Keywords"];return x&&t?e.jsx(We,{open:t,onOpenChange:s,children:e.jsxs(Ke,{className:"max-w-4xl",children:[e.jsxs(Ue,{children:[e.jsx(Ge,{children:"Loading Onboarding"}),e.jsx(st,{children:"Checking your API key configuration..."})]}),e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700",children:"Checking configuration..."})]})})]})}):e.jsx(We,{open:t,onOpenChange:s,children:e.jsxs(Ke,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ue,{children:[e.jsx(Ge,{className:"text-2xl font-bold text-center",children:"Welcome to AuNoo AI"}),e.jsx(st,{className:"sr-only",children:"Set up your AuNoo AI account and create your first topic"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(La,{currentStep:r,totalSteps:3,stepLabels:w}),e.jsxs("div",{className:"mt-8",children:[r===1&&e.jsx(Da,{onNext:N}),r===2&&e.jsx($a,{onNext:u,onBack:v}),r===3&&l&&e.jsx(za,{topicData:l,suggestedKeywords:o,onBack:p,onComplete:b})]})]})]})})}const Va=Sn("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Ba({className:t,variant:s,...n}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:le(Va({variant:s}),t),...n})}function Ha({className:t,...s}){return e.jsx("div",{"data-slot":"alert-title",className:le("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...s})}function Wa({className:t,...s}){return e.jsx("div",{"data-slot":"alert-description",className:le("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...s})}const ot={"gpt-3.5-turbo":16385,"gpt-3.5-turbo-16k":16385,"gpt-4":8192,"gpt-4-32k":32768,"gpt-4-turbo":128e3,"gpt-4-turbo-preview":128e3,"gpt-4o":128e3,"gpt-4o-mini":128e3,"gpt-4.1":1e6,"gpt-4.1-mini":1e6,"gpt-4.1-nano":1e6,"claude-3-opus":2e5,"claude-3-sonnet":2e5,"claude-3-haiku":2e5,"claude-3.5-sonnet":2e5,"claude-4":2e5,"claude-4-opus":2e5,"claude-4-sonnet":2e5,"claude-4-haiku":2e5,"gemini-pro":32768,"gemini-1.5-pro":2097152,"llama-2-70b":4096,"llama-3-70b":8192,"mixtral-8x7b":32768,default:16385};function Ka(t){return Math.ceil((t?.length||0)/4)}function Ua(t,s,n="auto",r){if(n==="custom"&&r)return r;const l=(ot[t]||ot.default)>=1e6;let a;switch(n){case"focused":a=l?50:25;break;case"balanced":a=l?100:50;break;case"comprehensive":a=l?200:100;break;case"auto":default:const x=(s?.length||0)>200?1.2:1;let d=l?150:75;(s.includes("trend")||s.includes("convergence"))&&(d=l?300:150),a=Math.round(d*x);break}return Math.max(10,Math.min(a,l?1e3:400))}function Ga(t,s="auto",n){const r="trend convergence analysis",i=Ua(t,r,s,n),l=ot[t]||ot.default,a=500,o=Ka(r),x=i*180,d=a+o+x,f=d/l*100,N=l>=1e6?" ğŸš€1M":l>=2e5?" âš¡200K":l>=1e5?" ğŸ’«100K":"",u=`Context: ${i} articles, ~${d.toLocaleString()} tokens (${f.toFixed(1)}%)${N}`;let v="text-blue-700";return f>90?v="text-red-600 font-bold":f>70?v="text-orange-600 font-semibold":f>50&&(v="text-green-600 font-medium"),{sampleSize:i,totalTokens:d,contextUsage:f,contextLimit:l,modelIndicator:N,displayText:u,colorClass:v}}function Xa(){const{data:t,topics:s,profiles:n,models:r,config:i,loading:l,error:a,generateAnalysis:o,updateConfig:c}=Wn(),[x,d]=h.useState("strategic-recommendations"),[f,N]=h.useState(!1),[u,v]=h.useState(!1),[p,b]=h.useState(!1),[w,j]=h.useState(null),[C,g]=h.useState(!1),[y,_]=h.useState(null),[k,T]=h.useState(!1);h.useEffect(()=>{new URLSearchParams(window.location.search).get("onboarding")==="true"&&(b(!0),window.history.replaceState({},"",window.location.pathname))},[]),h.useEffect(()=>{const S={consensus:"consensus","strategic-recommendations":"strategic","impact-timeline":"timeline","market-signals":"signals","future-horizons":"horizons"}[x];if(S){c({tab:S});const P=`trendConvergence_data_${S}`;!localStorage.getItem(P)&&i.topic&&!l&&(console.log(`No cached data for ${S} tab, auto-generating...`),o())}},[x,c,i.topic,l,o]),h.useEffect(()=>{if(i.model){const m=i.custom_limit?"custom":"auto",S=Ga(i.model,m,i.custom_limit);j(S)}},[i.model,i.custom_limit]);const L=async()=>{await o(),N(!1)},D=async()=>{const m=t?.analysis_id;if(!m){alert("No analysis ID found. Please generate an analysis first.");return}T(!0);try{let S;switch(x){case"market-signals":S=await Fn(m);break;case"impact-timeline":S=await Vn(m);break;case"strategic-recommendations":S=await Bn(m);break;case"future-horizons":S=await Hn(m);break;default:alert("View Raw is not supported for this tab");return}_(S),g(!0)}catch(S){console.error("Failed to load raw analysis:",S),alert("Failed to load stored analysis")}finally{T(!1)}},A=()=>{y&&(navigator.clipboard.writeText(JSON.stringify(y,null,2)),alert("Copied to clipboard!"))};return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx(kn,{currentPage:"anticipate"}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("span",{children:"Explore"}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"font-medium text-gray-950",children:"Strategic Recommendations"}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:"Current indicators and potential disruption scenarios"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-md",children:e.jsx(_n,{className:"w-5 h-5 text-gray-700"})}),e.jsxs("button",{onClick:()=>b(!0),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm font-medium flex items-center gap-2 text-gray-950",children:["Set up topic",e.jsx("span",{className:"text-gray-500",children:"+"})]})]})]}),e.jsx(We,{open:f,onOpenChange:N,children:e.jsxs(Ke,{className:"max-w-4xl",children:[e.jsxs(Ue,{children:[e.jsx(Ge,{className:"text-2xl font-bold",children:"Configure Trend Convergence Analysis"}),e.jsx(st,{className:"sr-only",children:"Configure your analysis settings"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-6 mt-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Topic"}),e.jsxs(ee,{value:i.topic,onValueChange:m=>c({topic:m}),children:[e.jsx(se,{className:"w-full",children:e.jsx(te,{placeholder:"Cloud Repatriation"})}),e.jsx(ne,{children:s.map(m=>e.jsx(R,{value:m.name,children:m.display_name},m.name))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Analysis Timeframe"}),e.jsxs(ee,{value:i.timeframe_days.toString(),onValueChange:m=>c({timeframe_days:parseInt(m)}),children:[e.jsx(se,{className:"w-full",children:e.jsx(te,{placeholder:"All Time"})}),e.jsxs(ne,{children:[e.jsx(R,{value:"0",children:"All Time"}),e.jsx(R,{value:"30",children:"Last 30 days"}),e.jsx(R,{value:"90",children:"Last 90 days"}),e.jsx(R,{value:"180",children:"Last 180 days"}),e.jsx(R,{value:"365",children:"Last year"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"AI Model"}),e.jsxs(ee,{value:i.model,onValueChange:m=>c({model:m}),children:[e.jsx(se,{className:"w-full",children:e.jsx(te,{placeholder:"gpt-4.1-mini"})}),e.jsx(ne,{children:r.map(m=>e.jsx(R,{value:m.id,children:m.name},m.id))})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Analysis Depth"}),e.jsxs(ee,{value:i.analysis_depth,onValueChange:m=>c({analysis_depth:m}),children:[e.jsx(se,{className:"w-full",children:e.jsx(te,{placeholder:"Standard analysis"})}),e.jsxs(ne,{children:[e.jsx(R,{value:"quick",children:"Quick Overview"}),e.jsx(R,{value:"standard",children:"Standard analysis"}),e.jsx(R,{value:"deep",children:"Deep Dive"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Organizational Profile"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ee,{value:i.profile_id?.toString()||"",onValueChange:m=>c({profile_id:m?parseInt(m):void 0}),children:[e.jsx(se,{className:"flex-1",children:e.jsx(te,{placeholder:"Select Profile"})}),e.jsx(ne,{children:n.map(m=>e.jsx(R,{value:m.id.toString(),children:m.name},m.id))})]}),e.jsx(W,{variant:"outline",size:"icon",className:"shrink-0 bg-pink-500 hover:bg-pink-600 text-white border-0",onClick:()=>v(!0),children:e.jsx(vt,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Article Sample Size"}),e.jsxs(ee,{value:i.custom_limit?.toString()||"auto",onValueChange:m=>{c(m==="auto"?{custom_limit:void 0,sample_size_mode:"auto"}:{custom_limit:parseInt(m),sample_size_mode:"custom"})},children:[e.jsx(se,{className:"w-full",children:e.jsx(te,{placeholder:"Auto Size"})}),e.jsxs(ne,{children:[e.jsx(R,{value:"auto",children:"Auto Size"}),e.jsx(R,{value:"50",children:"50 articles"}),e.jsx(R,{value:"100",children:"100 articles"}),e.jsx(R,{value:"200",children:"200 articles"})]})]}),w&&e.jsxs("div",{className:"mt-2 p-3 bg-cyan-50 rounded-lg flex items-start gap-2",children:[e.jsx(bt,{className:"w-4 h-4 text-cyan-600 mt-0.5 shrink-0"}),e.jsx("div",{className:"text-xs",children:e.jsx("span",{className:`font-medium ${w.colorClass}`,children:w.displayText})})]})]})]})]}),a&&e.jsxs(Ba,{variant:"destructive",className:"mt-6",children:[e.jsx(bt,{className:"h-4 w-4"}),e.jsx(Ha,{children:"Error"}),e.jsx(Wa,{children:a})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[e.jsx(W,{variant:"outline",onClick:()=>N(!1),className:"px-6",children:"Clear"}),e.jsx(W,{onClick:L,disabled:l||!i.topic,className:"px-6 bg-pink-500 hover:bg-pink-600",children:l?e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading..."]}):e.jsxs(e.Fragment,{children:["Load analysis",e.jsx("span",{className:"ml-2",children:"â–¶"})]})})]})]})}),e.jsx("div",{className:"bg-white px-6 py-4",children:e.jsx(ur,{activeTab:x,onTabChange:d})}),e.jsx("div",{className:"bg-white px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Zt,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Topic:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-950",children:i.topic||"Cloud Repatriation"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Last Updated:"}),e.jsx("span",{className:"text-sm font-medium",children:t?._cache_info?.last_updated||new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,".")}),e.jsx("button",{onClick:()=>o(!0),disabled:l,className:"p-2 hover:bg-gray-100 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh analysis (bypass cache)",children:e.jsx(dr,{className:`w-4 h-4 text-gray-700 ${l?"animate-spin":""}`})})]})]})}),e.jsxs("div",{className:"bg-white px-6 py-3 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("button",{onClick:()=>N(!0),className:"px-4 py-2 text-pink-500 hover:bg-pink-50 rounded-md text-sm font-medium flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4"}),"Configure"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"px-3 py-2 hover:bg-gray-100 rounded-md text-sm font-medium flex items-center gap-2 text-pink-500",children:[e.jsx(Ze,{className:"w-4 h-4"}),"Columns"]}),e.jsxs("button",{className:"px-3 py-2 hover:bg-gray-100 rounded-md text-sm font-medium flex items-center gap-2 text-pink-500",children:[e.jsx(ir,{className:"w-4 h-4"}),"Image"]}),e.jsxs("button",{className:"px-3 py-2 hover:bg-gray-100 rounded-md text-sm font-medium flex items-center gap-2 text-pink-500",children:[e.jsx(An,{className:"w-4 h-4"}),"PDF"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ve,{className:"w-12 h-12 animate-spin text-pink-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700",children:"Analyzing trends and generating recommendations..."})]})}):t?e.jsxs("div",{className:"space-y-6 max-w-6xl",children:[x==="impact-timeline"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-2 mb-4",children:e.jsxs("button",{onClick:D,disabled:!t?.analysis_id||k,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Qe,{className:"w-4 h-4"}),k?"Loading...":"View Raw"]})}),e.jsx("div",{className:"space-y-4",children:(t.impact_timeline||[]).map((m,S)=>{const P=["orange","purple","green","blue","pink","lime"],O=P[S%P.length];return e.jsx(jr,{title:typeof m=="string"?m:m.title||m.name,description:typeof m=="string"?"":m.description||"",timelineStart:typeof m=="string"?2024:m.timeline_start||2024,timelineEnd:typeof m=="string"?2030:m.timeline_end||2030,tooltipPositions:typeof m=="string"?[]:m.tooltip_positions||[],color:O},S)})}),t.key_insights&&t.key_insights.length>0&&e.jsxs("div",{className:"mt-8 bg-cyan-50 border border-cyan-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ze,{className:"w-5 h-5 text-cyan-600"}),e.jsx("h2",{className:"text-xl font-bold",children:"Key Insights from Evidence Synthesis"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.key_insights.map((m,S)=>{const P=["bg-blue-500","bg-green-500","bg-red-500","bg-orange-500"],O=P[S%P.length];return e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:`w-3 h-3 ${O} rounded-full mt-1 shrink-0`}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-950 mb-1",children:typeof m=="string"?m:m.quote||m.insight}),e.jsx("div",{className:"text-xs text-gray-700",children:typeof m=="string"?"":m.relevance||m.source||""})]})]},S)})})]})]}),x==="market-signals"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-2 mb-4",children:e.jsxs("button",{onClick:D,disabled:!t?.analysis_id||k,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Qe,{className:"w-4 h-4"}),k?"Loading...":"View Raw"]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-3 text-sm font-semibold text-gray-800",children:"Future Signal"}),e.jsx("th",{className:"text-left px-6 py-3 text-sm font-semibold text-gray-800",children:"Impact"}),e.jsx("th",{className:"text-left px-6 py-3 text-sm font-semibold text-gray-800",children:"Timeline"}),e.jsx("th",{className:"text-left px-6 py-3 text-sm font-semibold text-gray-800",children:"Confidence"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:("future_signals"in t?t.future_signals:[]).map((m,S)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-950",children:m.signal}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:m.description})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-medium rounded ${m.impact==="High"?"bg-red-100 text-red-700":m.impact==="Medium"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:m.impact})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:m.timeline}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:m.confidence})]},S))})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:("risk_cards"in t?t.risk_cards:[]).map((m,S)=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${m.severity==="High"||m.severity==="Critical"?"bg-red-100":m.severity==="Medium"?"bg-yellow-100":"bg-orange-100"}`,children:e.jsx(bt,{className:`w-5 h-5 ${m.severity==="High"||m.severity==="Critical"?"text-red-600":m.severity==="Medium"?"text-yellow-600":"text-orange-600"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-950",children:m.title}),e.jsx("span",{className:"text-xs text-gray-500",children:m.timeframe})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:m.description}),m.mitigation_strategies&&m.mitigation_strategies.length>0&&e.jsxs("div",{className:"text-xs",children:[e.jsx("p",{className:"font-medium text-gray-600 mb-1",children:"Mitigation:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-600",children:m.mitigation_strategies.slice(0,2).map((P,O)=>e.jsx("li",{children:P},O))})]})]})]})},S))}),e.jsx("div",{className:"space-y-4",children:("opportunity_cards"in t?t.opportunity_cards:[]).map((m,S)=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(Je,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-950",children:m.title}),e.jsx("span",{className:"text-xs text-gray-500",children:m.timeframe})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:m.description}),m.potential_value&&e.jsxs("p",{className:"text-xs font-medium text-green-600 mb-2",children:["Value: ",m.potential_value]}),m.action_steps&&m.action_steps.length>0&&e.jsxs("div",{className:"text-xs",children:[e.jsx("p",{className:"font-medium text-gray-600 mb-1",children:"Actions:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-600",children:m.action_steps.slice(0,2).map((P,O)=>e.jsx("li",{children:P},O))})]})]})]})},S))})]}),e.jsx("div",{className:"space-y-4",children:("quotes"in t?t.quotes:[]).slice(0,3).map((m,S)=>e.jsx("div",{className:"bg-cyan-50 border border-cyan-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"text-4xl text-cyan-400 font-serif leading-none",children:'"'}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-800 mb-2 italic",children:m.text}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("div",{className:"text-xs text-gray-600",children:m.context}),e.jsxs("p",{className:"text-sm text-gray-700",children:["â€” ",e.jsx("a",{href:m.url,target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 hover:text-cyan-700 hover:underline",children:m.source})]})]}),m.relevance&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600 border-t border-cyan-200 pt-2",children:[e.jsx("span",{className:"font-medium",children:"Relevance:"})," ",m.relevance]})]})]})},S))})]}),x==="consensus"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[(t.categories||[]).map((m,S)=>e.jsx(vr,{category:m,index:S},S)),(!t.categories||t.categories.length===0)&&(t.convergences||[]).map((m,S)=>{const P=["purple","orange","blue","green","pink","indigo"],O=P[S%P.length];return e.jsx(pr,{name:m.name||"Unnamed Convergence",description:m.description||"",consensusPercentage:m.consensus_percentage||80,timelineStartYear:m.timeline_start_year||2024,timelineEndYear:m.timeline_end_year||2050,optimisticOutlier:m.optimistic_outlier||{year:2024,description:"Optimistic scenario",source_percentage:25},pessimisticOutlier:m.pessimistic_outlier||{year:2040,description:"Pessimistic scenario",source_percentage:35},strategicImplication:m.strategic_implication||"Strategic planning required",keyArticles:m.key_articles||[],color:O,consensusType:m.consensus_type,sentimentDistribution:m.sentiment_distribution,timelineConsensus:m.timeline_consensus,articlesAnalyzed:m.articles_analyzed,actionItems:m.action_items,timeframeAnalysis:m.timeframe_analysis},S)})]}),t.key_insights&&t.key_insights.length>0&&e.jsxs("div",{className:"mt-8 bg-cyan-50 border border-cyan-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ze,{className:"w-5 h-5 text-cyan-600"}),e.jsx("h2",{className:"text-xl font-bold",children:"Key Insights from Evidence Synthesis"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.key_insights.map((m,S)=>{const P=["bg-blue-500","bg-green-500","bg-red-500","bg-orange-500"],O=P[S%P.length];return e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:`w-3 h-3 ${O} rounded-full mt-1 shrink-0`}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-950 mb-1",children:typeof m=="string"?m:m.quote||m.insight}),e.jsx("div",{className:"text-xs text-gray-700",children:typeof m=="string"?"":m.relevance||m.source||""})]})]},S)})})]})]}),x==="strategic-recommendations"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-2 mb-4",children:e.jsxs("button",{onClick:D,disabled:!t?.analysis_id||k,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Qe,{className:"w-4 h-4"}),k?"Loading...":"View Raw"]})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Strategic Recommendations"}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"bg-green-50 p-6 border-b border-green-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(Zt,{className:"w-4 h-4 text-green-700"})}),e.jsx("h3",{className:"font-bold text-sm text-gray-900",children:"NEAR-TERM"})]}),e.jsx("div",{className:"text-sm font-medium text-gray-700",children:t.strategic_recommendations?.near_term?.timeframe||"2025-2027"})]}),e.jsx("div",{className:"p-6",children:e.jsx("ul",{className:"space-y-3",children:(t.strategic_recommendations?.near_term?.trends||[]).slice(0,4).map((m,S)=>e.jsxs("li",{className:"text-sm text-gray-700 leading-relaxed flex gap-2",children:[e.jsx("span",{className:"text-green-600 font-bold",children:"â€¢"}),e.jsx("span",{children:typeof m=="string"?m:m.name||m.description})]},S))})}),e.jsx("div",{className:"px-6 pb-6",children:e.jsx(St,{startYear:2024,endYear:2030,color:"green"})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"bg-amber-50 p-6 border-b border-amber-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-amber-100 flex items-center justify-center",children:e.jsx(Pn,{className:"w-4 h-4 text-amber-700"})}),e.jsx("h3",{className:"font-bold text-sm text-gray-900",children:"MID-TERM"})]}),e.jsx("div",{className:"text-sm font-medium text-gray-700",children:t.strategic_recommendations?.mid_term?.timeframe||"2027-2032"})]}),e.jsx("div",{className:"p-6",children:e.jsx("ul",{className:"space-y-3",children:(t.strategic_recommendations?.mid_term?.trends||[]).slice(0,4).map((m,S)=>e.jsxs("li",{className:"text-sm text-gray-700 leading-relaxed flex gap-2",children:[e.jsx("span",{className:"text-amber-600 font-bold",children:"â€¢"}),e.jsx("span",{children:typeof m=="string"?m:m.name||m.description})]},S))})}),e.jsx("div",{className:"px-6 pb-6",children:e.jsx(St,{startYear:2027,endYear:2033,color:"yellow"})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"bg-rose-50 p-6 border-b border-rose-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-rose-100 flex items-center justify-center",children:e.jsx(Je,{className:"w-4 h-4 text-rose-700"})}),e.jsx("h3",{className:"font-bold text-sm text-gray-900",children:"LONG-TERM (2032+)"})]}),e.jsx("div",{className:"text-sm font-medium text-gray-700",children:t.strategic_recommendations?.long_term?.timeframe||"2032+"})]}),e.jsx("div",{className:"p-6",children:e.jsx("ul",{className:"space-y-3",children:(t.strategic_recommendations?.long_term?.trends||[]).slice(0,4).map((m,S)=>e.jsxs("li",{className:"text-sm text-gray-700 leading-relaxed flex gap-2",children:[e.jsx("span",{className:"text-rose-600 font-bold",children:"â€¢"}),e.jsx("span",{children:typeof m=="string"?m:m.name||m.description})]},S))})}),e.jsx("div",{className:"px-6 pb-6",children:e.jsx(St,{startYear:2032,endYear:2040,color:"red"})})]})]})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Je,{className:"w-5 h-5 text-orange-600"}),e.jsx("h2",{className:"text-xl font-bold",children:"Executive Decision Framework"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:(t.executive_decision_framework?.principles||[]).map((m,S)=>e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-orange-200",children:[e.jsx("h3",{className:"font-semibold text-sm mb-2",children:m.title||m.name}),e.jsx("p",{className:"text-sm text-gray-800",children:m.description||m.content||m.rationale})]},S))})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ze,{className:"w-5 h-5 text-gray-700"}),e.jsx("h2",{className:"text-xl font-bold",children:"Next Steps:"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:(t.next_steps||[]).map((m,S)=>e.jsxs("div",{className:"flex gap-3 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center text-sm font-medium text-gray-800",children:S+1}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-gray-800",children:typeof m=="string"?m:m.action||m.description||JSON.stringify(m)})})]},S))})]})]}),x==="future-horizons"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-2 mb-4",children:e.jsxs("button",{onClick:D,disabled:!t?.analysis_id||k,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Qe,{className:"w-4 h-4"}),k?"Loading...":"View Raw"]})}),e.jsx(Nr,{scenarios:t.scenarios||[]})]})]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Je,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-950 mb-2",children:"Ready to Analyze Trends"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Configure your analysis settings to get started"}),e.jsxs(W,{onClick:()=>N(!0),children:[e.jsx(vt,{className:"w-4 h-4 mr-2"}),"Configure Analysis"]})]})})})]}),e.jsx(Ma,{open:u,onOpenChange:v,profiles:n,onSave:async m=>{console.log("Saving profile:",m)}}),e.jsx(Fa,{open:p,onOpenChange:b,onComplete:()=>{window.location.reload()}}),C&&e.jsx(We,{open:C,onOpenChange:g,children:e.jsxs(Ke,{className:"max-w-4xl max-h-[80vh] overflow-auto",children:[e.jsxs(Ue,{children:[e.jsx(Ge,{children:"Raw Analysis Output"}),e.jsx(st,{children:"Stored analysis data from database"})]}),e.jsx("div",{className:"mt-4",children:y&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Analysis ID:"})," ",y.analysis_id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Topic:"})," ",y.topic]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Model:"})," ",y.model_used]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created:"})," ",y.created_at]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Articles Analyzed:"})," ",y.total_articles_analyzed]})]}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:e.jsx("pre",{className:"text-xs overflow-auto whitespace-pre-wrap",children:JSON.stringify(y.raw_output,null,2)})}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx(W,{onClick:A,variant:"outline",size:"sm",children:"Copy to Clipboard"}),e.jsx(W,{onClick:()=>g(!1),variant:"outline",size:"sm",children:"Close"})]})]})})]})})]})}Tn.createRoot(document.getElementById("root")).render(e.jsx(Xa,{}));
